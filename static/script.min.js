var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=b[c];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");var started=!1;
try{var socket=io("https://socket.donationalerts.ru:443",{reconnection:!1}),token=getCookie("token");token&&socket.emit("add-user",{token:token,type:"minor"});socket.on("donation",function(a){if(started){var b=JSON.parse(a);if(1===b.alert_type){a=b.message;var c=b.amount;b=document.getElementsByClassName("name");for(var d=document.getElementsByClassName("cost"),e=!1,f=0;f<Math.min(b.length,d.length);f++){var g=b[f].value,h=+d[f].value;if(g&&a.toLowerCase().includes(g.toLowerCase())){confirm('\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a "'+
g+'" '+c+"\u0440?")&&(d[f].value=c+h);e=!0;break}}if(!e&&confirm('\u0421\u043e\u0437\u0434\u0430\u0442\u044c "'+a+'" \u0441 '+c+"\u0440?"))for(d=document.createElement("div"),d.className="block",d.innerHTML='<label>\n                       <input class="name" type="text" onkeyup="changeSize(this);createLink(this)"\n                         title="\u0424\u0438\u043b\u044c\u043c, \u0438\u0433\u0440\u0430, etc" value="'+a+'" autocomplete="off" placeholder="\u041f\u043e\u0437\u0438\u0446\u0438\u044f">\n                       <input class="cost" type="number" min="0" \n                         onkeyup="changeTitle(this)" onchange="sortCandidates()" placeholder="\u20bd" title="\u0421\u0443\u043c\u043c\u0430" \n                         value="'+
c+'" autocomplete="off">\n                     </label>\n                     <span>\n                     <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link" \n                       title="\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"><img src="static/icons/round-video_library-24px.svg" \n                       alt="\u0418\u043a\u043e\u043d\u043a\u0430 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"></a>\n                     <button type="button" class="btn" onclick="removeRow(this)" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c">\n                       <img src="static/icons/round-delete-24px.svg" alt="\u0418\u043a\u043e\u043d\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f">\n                     </button>\n                     </span>',
candidatesArea.insertBefore(d,candidatesArea.lastElementChild),sortCandidates(),a=0;a<b.length;a++)createLink(b[a])}}})}catch(a){console.log("\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0430\u0432\u0442\u043e\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c.")}var defaultSize=16.2,maxSize=defaultSize,styleForSize=document.createElement("style");
styleForSize.appendChild(document.createTextNode(".name{width:"+defaultSize+"vw}"));document.head.appendChild(styleForSize);function changeSize(a){a=a.value.length-12;var b=document.getElementsByClassName("name");if(0<a)var c=Math.round(16.2+1.2*a);else 1===b.length&&(maxSize=defaultSize,styleForSize.innerText=".name{width:"+defaultSize+"vw}#add-btn{width:"+(defaultSize+10)+"vw}");c&&c>maxSize&&(maxSize=c,styleForSize.innerText=".name{width:"+c+"vw}#add-btn{width:"+(c+10)+"vw!important}")}
function returnWinner(){for(var a="\u041d\u0438\u043a\u0442\u043e \u043d\u0435 ",b=null,c=document.getElementsByClassName("name"),d=document.getElementsByClassName("cost"),e=0;e<Math.min(c.length,d.length);e++){var f=c[e].value,g=+d[e].value;g>b&&(b=g,a=f?f:a)}b&&(a=a[0].toUpperCase()+a.substring(1));return a}
function startTimer(){started=!0;startBtn.onclick=void 0;var a=document.getElementById("timer"),b=a.innerHTML.split(":"),c=b[0],d=b[1];b=b[2];if(0==b){if(0==d){if(0==c){var e=document.querySelector("#modal"),f=document.querySelector("#modal-overlay");started=!1;a.classList.remove("danger");f.onclick=function(){e.classList.toggle("closed");f.classList.toggle("closed");document.title="\u0410\u0443\u043a\u0446\u0438\u043e\u043d \u03b2"};a=returnWinner();e.children[0].innerText=a+" \u043f\u043e\u0431\u0435\u0434\u0438\u043b!";
e.classList.toggle("closed");f.classList.toggle("closed");document.title=a+" \u043f\u043e\u0431\u0435\u0434\u0438\u043b!";startBtn.onclick=function(){startTimer()};return}c--;d=59;10>c&&(c="0"+c)}d--;30>d&&0==c?a.className="danger":a.classList.remove("danger");10>d&&(d="0"+d);b=returnWinner();document.title=c+":"+d+("\u041d\u0438\u043a\u0442\u043e \u043d\u0435 "===b?"":" - "+b);b=99}else b--;10>b&&(b="0"+b);a.innerHTML=c+":"+d+":"+b;setTimeout(startTimer,10)}
var startBtn=document.getElementById("start-btn"),resetBtn=document.getElementById("stop-btn"),plusBtn=document.getElementById("plus-btn"),plusTwoBtn=document.getElementById("plus-two-btn"),minusBtn=document.getElementById("minus-btn");startBtn.onclick=function(){startTimer()};resetBtn.onclick=function(){timer.innerHTML="00:00:00"};plusBtn.onclick=function(){var a=timer.innerHTML.split(":"),b=a[0],c=a[1];a=a[2];b++;10>b&&(b="0"+b);timer.innerHTML=b+":"+c+":"+a};
plusTwoBtn.onclick=function(){var a=timer.innerHTML.split(":"),b=a[0],c=a[1];a=a[2];b++;b++;10>b&&(b="0"+b);timer.innerHTML=b+":"+c+":"+a};minusBtn.onclick=function(){var a=timer.innerHTML.split(":"),b=a[0],c=a[1];a=a[2];b--;0>b?b="00":10>b&&(b="0"+b);timer.innerHTML=b+":"+c+":"+a};
function sortCandidates(){for(var a=[],b=document.getElementsByClassName("name"),c=document.getElementsByClassName("cost"),d=0;d<Math.min(b.length,c.length);d++){var e=b[d].value,f=+c[d].value,g=b[d].getAttribute("title"),h=c[d].getAttribute("title");a.push({name:e,cost:f,titleName:g,titleCost:h,link:b[d].parentNode.parentNode.children[1].children[0].href})}a=a.sort(function(a,b){return a.cost-b.cost}).reverse();for(d=0;d<Math.min(b.length,c.length);d++)e=a[d].cost,c[d].value=0==e?"":e,b[d].value=
a[d].name,b[d].setAttribute("title",a[d].titleName),c[d].setAttribute("title",a[d].titleCost),b[d].parentNode.parentNode.children[1].children[0].href=a[d].link}
function clearRow(){var a=document.getElementById("candidates-area"),b=a.children[0].children[0];a=a.children[0].children[1].children[0];b.children[0].value="";b.children[1].value="";b.children[0].setAttribute("title","\u0424\u0438\u043b\u044c\u043c, \u0438\u0433\u0440\u0430, etc");b.children[1].setAttribute("title","\u0421\u0443\u043c\u043c\u0430");a.href="https://www.kinopoisk.ru";changeSize(b.children[0])}
function removeRow(a){a.parentNode.parentNode.parentNode.removeChild(a.parentNode.parentNode);a=document.getElementsByClassName("name");1!==a.length||a[0].value||(maxSize=defaultSize,styleForSize.innerText=".name{width:"+defaultSize+"vw}#add-btn{width:"+(defaultSize+10)+"vw}")}
function createLink(a){var b=a.value;b?(a.parentNode.parentNode.children[1].children[0].href="https://www.kinopoisk.ru/s/type/all/find/"+b+"/",a.setAttribute("title",b)):(a.parentNode.parentNode.children[1].children[0].href="https://www.kinopoisk.ru",a.setAttribute("title","\u0424\u0438\u043b\u044c\u043c, \u0438\u0433\u0440\u0430, etc"))}var addBtn=document.getElementById("add-btn"),candidatesArea=document.getElementById("candidates-area");
addBtn.onclick=function(){var a=document.createElement("div");a.className="block";a.innerHTML='<label>\n                       <input class="name" type="text" onkeyup="changeSize(this);createLink(this)" \n                         title="\u0424\u0438\u043b\u044c\u043c, \u0438\u0433\u0440\u0430, etc" autocomplete="off" placeholder="\u041f\u043e\u0437\u0438\u0446\u0438\u044f">\n                       <input class="cost" type="number" min="0" \n                         onkeyup="changeTitle(this)" onchange="sortCandidates()" placeholder="\u20bd" title="\u0421\u0443\u043c\u043c\u0430" autocomplete="off">\n                     </label>\n                     <span>\n                     <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link" \n                       title="\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"><img src="static/icons/round-video_library-24px.svg" \n                       alt="\u0418\u043a\u043e\u043d\u043a\u0430 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"></a>\n                     <button type="button" class="btn" onclick="removeRow(this)" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c">\n                       <img src="static/icons/round-delete-24px.svg" alt="\u0418\u043a\u043e\u043d\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f">\n                     </button>\n                    </span>';
candidatesArea.insertBefore(a,candidatesArea.lastElementChild);sortCandidates()};function getCookie(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0}
function setCookie(a,b,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1E3*d);d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString());b=encodeURIComponent(b);a=a+"="+b;for(var f in c)a+="; "+f,b=c[f],!0!==b&&(a+="="+b);document.cookie=a}function changeBG(a){document.getElementsByTagName("body")[0].style.backgroundImage=a&&""!==a?"url("+a+")":"url('static/38263.webp')"}
function sheet(a){var b=document.createElement("style");b.appendChild(document.createTextNode(a));document.head.appendChild(b);return b}
var showSettingsBtn=document.getElementById("settings-icon").children[0],settingsWindow=document.getElementById("settings"),saveBGURLBtn=document.getElementById("save-bg-url-btn"),clearBGURLBtn=document.getElementById("clear-bg-url-btn"),bgURLInput=document.getElementById("bg-url"),colorExctractor=document.getElementById("color-extractor"),year=31622400,bgURL=getCookie("bg-url"),styleElement;showSettingsBtn.onclick=function(){settingsWindow.classList.toggle("closed")};var colorCookie=getCookie("accent");
styleElement=colorCookie&&""!==colorCookie?sheet(".name,.cost,#bg-url,.danger,#da-url{color:"+colorCookie+"!important}"):sheet(".name,.cost,#bg-url,.danger,#da-url{color:#f39727!important}");
saveBGURLBtn.onclick=function(){setCookie("bg-url",bgURLInput.value,{expires:year});changeBG(getCookie("bg-url"));colorExctractor.setAttribute("src","https://cors-anywhere.herokuapp.com/"+bgURLInput.value);colorExctractor.addEventListener("load",function(){var a=(new Vibrant(this)).swatches().Vibrant.getHex();styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url{color:"+a+"!important}";setCookie("accent",a,{expires:year})})};
clearBGURLBtn.onclick=function(){bgURLInput.value="";saveBGURLBtn.click();styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url{color:#f39727!important}";setCookie("accent","",{expires:year})};changeBG(bgURL);bgURLInput.value=bgURL?bgURL:"";var daURL=document.getElementById("da-url"),saveDAURLBtn=document.getElementById("save-da-url-btn"),clearDAURLBtn=document.getElementById("clear-da-url-btn"),tokenCookie=getCookie("token");daURL.value=tokenCookie?tokenCookie:"";
saveDAURLBtn.onclick=function(){setCookie("token",daURL.value,{expires:year});alert("\u0422\u043e\u043a\u0435\u043d \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d");location.reload()};clearDAURLBtn.onclick=function(){daURL.value="";setCookie("token","",{expires:year});location.reload()};document.onkeydown=function(a){var b=document.querySelector("#modal"),c=document.querySelector("#modal-overlay");if("Escape"===a.key||"Enter"===a.key)b.className="closed",c.className="closed"};
function changeTitle(a){a.setAttribute("title","\u0421\u0443\u043c\u043c\u0430"+(a.value?": "+a.value+" \u20bd":""))}var resetButton=document.getElementById("reset-icon");resetButton.onclick=function(){for(var a=document.getElementById("candidates-area");2<a.children.length;)a.removeChild(a.children[a.children.length-2]);clearRow()};
