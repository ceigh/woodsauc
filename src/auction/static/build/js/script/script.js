var woodsauc =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./script.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../node_modules/ripplet.js/es/ripplet.js":
/*!**************************************************************************!*\
  !*** /home/ceigh/Projects/auction/node_modules/ripplet.js/es/ripplet.js ***!
  \**************************************************************************/
/*! exports provided: defaultOptions, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultOptions\", function() { return defaultOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ripplet; });\nvar defaultOptions = {\n  className: '',\n  color: 'rgba(0,0,0,.1)',\n  opacity: null,\n  spreadingDuration: '.4s',\n  spreadingDelay: '0s',\n  spreadingTimingFunction: 'linear',\n  clearingDuration: '1s',\n  clearingDelay: '0s',\n  clearingTimingFunction: 'ease-in-out',\n  centered: false,\n  appendTo: 'body'\n};\nfunction ripplet(_a, _options) {\n  var currentTarget = _a.currentTarget,\n      clientX = _a.clientX,\n      clientY = _a.clientY;\n\n  if (!(currentTarget instanceof Element)) {\n    return;\n  }\n\n  var options = _options ? Object.keys(defaultOptions).reduce(function (merged, field) {\n    return merged[field] = _options.hasOwnProperty(field) ? _options[field] : defaultOptions[field], merged;\n  }, {}) : defaultOptions;\n  var targetRect = currentTarget.getBoundingClientRect();\n\n  if (options.centered && options.centered !== 'false') {\n    clientX = targetRect.left + targetRect.width * .5;\n    clientY = targetRect.top + targetRect.height * .5;\n  } else if (typeof clientX !== 'number' || typeof clientY !== 'number') {\n    return;\n  }\n\n  var documentElement = document.documentElement,\n      body = document.body;\n  var containerElement = document.createElement('div');\n  var removingElement = containerElement;\n  {\n    var appendToParent = options.appendTo === 'parent';\n    var targetStyle = getComputedStyle(currentTarget);\n    var containerStyle = containerElement.style;\n\n    if (targetStyle.position === 'fixed' || targetStyle.position === 'absolute' && appendToParent) {\n      if (appendToParent) {\n        currentTarget.parentElement.insertBefore(containerElement, currentTarget);\n      } else {\n        body.appendChild(containerElement);\n      }\n\n      copyStyles(containerStyle, targetStyle, ['position', 'left', 'top', 'right', 'bottom', 'marginLeft', 'marginTop', 'marginRight', 'marginBottom']);\n    } else if (appendToParent) {\n      var parentStyle = getComputedStyle(currentTarget.parentElement);\n\n      if (parentStyle.display === 'flex' || parentStyle.display === 'inline-flex') {\n        currentTarget.parentElement.insertBefore(containerElement, currentTarget);\n        containerStyle.position = 'absolute';\n        containerStyle.left = currentTarget.offsetLeft + \"px\";\n        containerStyle.top = currentTarget.offsetTop + \"px\";\n      } else {\n        var containerContainer = removingElement = currentTarget.parentElement.insertBefore(document.createElement('div'), currentTarget);\n        var containerContainerStyle = containerContainer.style;\n        containerContainerStyle.display = 'inline-block';\n        containerContainerStyle.position = 'relative';\n        containerContainerStyle.width = containerContainerStyle.height = '0';\n        containerContainerStyle.cssFloat = targetStyle.cssFloat;\n        var containerContainerRect = containerContainer.getBoundingClientRect(); // this may be a slow operation...\n\n        containerContainer.appendChild(containerElement);\n        containerStyle.position = 'absolute';\n        containerStyle.top = targetRect.top - containerContainerRect.top + \"px\";\n        containerStyle.left = targetRect.left - containerContainerRect.left + \"px\";\n      }\n    } else {\n      body.appendChild(containerElement);\n      containerStyle.position = 'absolute';\n      containerStyle.left = targetRect.left + documentElement.scrollLeft + body.scrollLeft + \"px\";\n      containerStyle.top = targetRect.top + documentElement.scrollTop + body.scrollTop + \"px\";\n    }\n\n    containerStyle.overflow = 'hidden';\n    containerStyle.pointerEvents = 'none';\n    containerStyle.width = targetRect.width + \"px\";\n    containerStyle.height = targetRect.height + \"px\";\n    containerStyle.zIndex = \"\" + ((parseInt(targetStyle.zIndex, 10) || 0) + 1);\n    containerStyle.opacity = options.opacity;\n    copyStyles(containerStyle, targetStyle, ['borderTopLeftRadius', 'borderTopRightRadius', 'borderBottomLeftRadius', 'borderBottomRightRadius', 'webkitClipPath', 'clipPath']);\n  }\n  {\n    var distanceX = Math.max(clientX - targetRect.left, targetRect.right - clientX);\n    var distanceY = Math.max(clientY - targetRect.top, targetRect.bottom - clientY);\n    var radius = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n    var rippletElement = containerElement.appendChild(document.createElement('div'));\n    var rippletStyle = rippletElement.style;\n    rippletElement.className = options.className;\n    rippletStyle.backgroundColor = options.color;\n    rippletStyle.width = rippletStyle.height = radius * 2 + \"px\";\n    rippletStyle.marginLeft = clientX - targetRect.left - radius + \"px\";\n    rippletStyle.marginTop = clientY - targetRect.top - radius + \"px\";\n    rippletStyle.borderRadius = '50%';\n    rippletStyle.transition = \"transform \" + options.spreadingDuration + \" \" + options.spreadingTimingFunction + \" \" + options.spreadingDelay + (\",opacity \" + options.clearingDuration + \" \" + options.clearingTimingFunction + \" \" + options.clearingDelay);\n    rippletStyle.transform = 'scale(0)'; // reflect styles by force layout\n    // tslint:disable-next-line:no-unused-expression\n\n    rippletElement.offsetTop;\n    rippletElement.addEventListener('transitionend', function (event) {\n      if (event.propertyName === 'opacity' && removingElement.parentElement) {\n        removingElement.parentElement.removeChild(removingElement);\n      }\n    });\n    rippletStyle.transform = '';\n    rippletStyle.opacity = '0';\n  }\n  return containerElement;\n}\n\nfunction copyStyles(destination, source, properties) {\n  for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n    var property = properties_1[_i];\n    destination[property] = source[property];\n  }\n}\n\n//# sourceURL=webpack://woodsauc//home/ceigh/Projects/auction/node_modules/ripplet.js/es/ripplet.js?");

/***/ }),

/***/ "./candidates.js":
/*!***********************!*\
  !*** ./candidates.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ripplet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ripplet.js */ \"../../node_modules/ripplet.js/es/ripplet.js\");\n/* harmony import */ var _winner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./winner */ \"./winner.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings */ \"./settings.js\");\n/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./notifications */ \"./notifications.js\");\n/* harmony import */ var _stringUtilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./stringUtilities */ \"./stringUtilities.js\");\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (sortCandidates);\nvar firstBlock = document.querySelector('.block');\nvar firstName = firstBlock.querySelector('.name');\nvar firstCost = firstBlock.querySelector('.cost');\nvar firstKpLink = firstBlock.querySelector('.kp-link');\nvar firstClearRowBtn = firstBlock.querySelector('.btn');\nvar buyText = document.querySelector('.block-buy span');\nvar addBtn = document.getElementById('add-btn');\nvar area = document.getElementById('candidates-area');\nvar resetButton = document.getElementById('reset-icon');\nvar buyBlock = document.querySelector('.block-buy');\nvar buyInput = buyBlock.querySelector('.cost-buy');\nvar buyClear = buyBlock.querySelector('.btn');\nvar buyCookie = getCookie('buyCost');\nvar modalOverlay = document.getElementById('modal-overlay');\nvar modal = document.getElementById('modal');\nvar stopBtn = document.getElementById('stop-btn');\nvar defaultSize = 16.2; // vw\n\nvar defaultMargin = 2.6; // vw\n\nvar highestMargin = 35.25; // vw\n\nvar maxSize = defaultSize;\nvar maxMargin = defaultMargin;\nfirstName.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nfirstCost.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nfirstKpLink.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nfirstClearRowBtn.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nbuyInput.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nbuyClear.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nresetButton.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\nfirstName.onchange = function () {\n  changeSize(this);\n  trimValue(this);\n};\n\nfirstName.onkeyup = function () {\n  createLink(this);\n  changeSize(this);\n  oneSpacedValue(this);\n};\n\nfirstCost.onchange = function () {\n  checksum(this);\n  checkOnBuy(this);\n  changeTitle(this);\n  sortCandidates();\n};\n\nfirstClearRowBtn.onclick = function () {\n  clearFirstRow();\n};\n\nresetButton.onclick = function () {\n  while (area.children.length > 3) {\n    area.children[area.children.length - 2].remove();\n  }\n\n  clearFirstRow();\n};\n\naddBtn.onclick = createBlock;\nbuyInput.value = !buyCookie ? '' : buyCookie;\nchangeTitle(buyInput);\n\nbuyInput.onchange = function () {\n  checksum(this);\n  changeTitle(this);\n  if (this.value) _settings__WEBPACK_IMPORTED_MODULE_2__[\"default\"].set('buyCost', this.value);else _settings__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"delete\"]('buyCost');\n};\n\nbuyClear.onclick = function () {\n  buyInput.value = '';\n  _settings__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"delete\"]('buyCost');\n};\n/**\n * Sort name and cost inputs by cost value\n *\n */\n\n\nfunction sortCandidates() {\n  var names = Array.from(document.getElementsByClassName('name'));\n  var costs = Array.from(document.getElementsByClassName('cost'));\n  var total = [];\n  names.forEach(function (name, i) {\n    var cost = costs[i];\n    var nameVal = name.value;\n    var costVal = Number(cost.value);\n    var nameTitle = name.getAttribute('title');\n    var costTitle = cost.getAttribute('title');\n    var link = name.parentElement.parentElement.querySelector('.kp-link').href;\n    total.push({\n      nameVal: nameVal,\n      costVal: costVal,\n      nameTitle: nameTitle,\n      costTitle: costTitle,\n      link: link\n    });\n  });\n  total = total.sort(function (e1, e2) {\n    return e1.costVal - e2.costVal;\n  }).reverse();\n  names.forEach(function (name, i) {\n    var totalE = total[i];\n    var costVal = totalE.costVal;\n    costVal = !costVal ? '' : Number(costVal);\n    name.value = totalE.nameVal;\n    costs[i].value = costVal;\n    name.setAttribute('title', totalE.nameTitle);\n    costs[i].setAttribute('title', totalE.costTitle);\n    name.parentElement.parentElement.querySelector('.kp-link').href = totalE.link;\n  });\n}\n/**\n * Make values of first name and cost elements empty\n *\n */\n\n\nfunction clearFirstRow() {\n  firstName.value = '';\n  firstCost.value = '';\n  firstName.setAttribute('title', 'Фильм, игра, etc');\n  firstCost.setAttribute('title', 'Сумма');\n  firstKpLink.href = 'https://www.kinopoisk.ru';\n  changeSize(firstName);\n  sortCandidates();\n}\n/**\n * Add row to list through copy first block\n *\n */\n\n\nfunction createBlock() {\n  var div = firstBlock.cloneNode(true);\n  var name = div.querySelector('.name');\n  var cost = div.querySelector('.cost');\n  var link = div.querySelector('.kp-link');\n  var btn = div.querySelector('.btn');\n  var delIcon = btn.querySelector('img');\n  name.value = '';\n  cost.value = '';\n  name.setAttribute('title', 'Фильм, игра, etc');\n  cost.setAttribute('title', 'Сумма');\n  link.setAttribute('title', 'Кинопоиск');\n  link.setAttribute('href', 'https://www.kinopoisk.ru');\n  delIcon.setAttribute('src', '/static/img/icons/material/delete.svg');\n  name.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n  cost.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n  link.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n  btn.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n  btn.onclick = function () {\n    removeRow(this);\n  };\n\n  name.onkeyup = function () {\n    createLink(this);\n    changeSize(this);\n  };\n\n  name.onchange = function () {\n    changeSize(this);\n  };\n\n  cost.onchange = function () {\n    checksum(this);\n    checkOnBuy(this);\n    changeTitle(this);\n    sortCandidates();\n  };\n\n  area.insertBefore(div, area.lastElementChild);\n  div.classList.add('visible');\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n}\n/**\n * Remove row from list\n *\n * @param {Object} delBtn - block delete button\n */\n\n\nfunction removeRow(delBtn) {\n  var names = document.getElementsByClassName('name'); // Remove .block\n\n  delBtn.parentElement.parentElement.remove(); // Get back to default size after delete last non-empty row\n\n  if (names.length === 1 && !names[0].value) {\n    maxSize = defaultSize;\n    names[0].removeAttribute('style');\n    addBtn.removeAttribute('style');\n    buyText.removeAttribute('style');\n  }\n}\n/**\n * Set title attribute to cost input\n *\n * @param {Object} costEl - cost input\n */\n\n\nfunction changeTitle(costEl) {\n  var cost = !costEl.value ? '' : \": \".concat(costEl.value, \" \\u20BD\");\n  costEl.setAttribute('title', \"\\u0421\\u0443\\u043C\\u043C\\u0430\".concat(cost));\n}\n/**\n * Eval cost input value to calculate\n *\n * @param {Object} costEl - cost input\n */\n\n\nfunction checksum(costEl) {\n  var calculated = costEl.value.replace(/[^\\d+*/,.-]/g, '');\n  calculated = calculated.replace(/,/, '.');\n\n  try {\n    calculated = eval(calculated);\n\n    if (isNaN(calculated) || !isFinite(calculated)) {\n      costEl.value = '';\n    } else {\n      calculated = calculated <= 0 ? '' : Number(Number(calculated).toFixed(2));\n      costEl.value = calculated;\n    }\n  } catch (_unused) {\n    costEl.value = '';\n  }\n}\n/**\n * Check if cost value is already > buy\n *\n * @param {Object} costEl - cost input\n * @see firstCost\n */\n\n\nfunction checkOnBuy(costEl) {\n  var need = Number(buyInput.value);\n  var curr = Number(costEl.value);\n  var name = _winner__WEBPACK_IMPORTED_MODULE_1__[\"default\"].decorate(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__[\"toTitle\"])(costEl.previousElementSibling.value));\n  if (!need || !name || curr < need) return;\n\n  if (window.started) {\n    window.isBuy = true;\n    window.buyWinner = name;\n    window.buyCost = curr;\n    stopBtn.click();\n  } else {\n    modalOverlay.onclick = function () {\n      modal.classList.add('closed');\n      modalOverlay.classList.add('closed');\n      document.title = 'WoodsAuc';\n    };\n\n    modal.querySelector('p').innerText = \"\".concat(name, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438, \\u0430\\u0436 \\u0437\\u0430 \").concat(curr, \"\\u20BD Pog!\");\n    modalOverlay.classList.remove('closed');\n    modal.classList.remove('closed');\n    _notifications__WEBPACK_IMPORTED_MODULE_3__[\"default\"].playNotificationSound();\n    _notifications__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sendNotification('Аукцион окончен!', \"\\u0412\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438 \".concat(name, \"!\"));\n    document.title = \"\".concat(name, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\");\n  }\n}\n/**\n * Change sizes of all name inputs\n *\n * @param {Object} nameEl - name input\n */\n\n\nfunction changeSize(nameEl) {\n  var names = Array.from(document.getElementsByClassName('name'));\n  var delta = nameEl.value.length - 10;\n  var width;\n  var margin;\n\n  if (delta > 0) {\n    width = Number((defaultSize + delta * 2.1).toFixed(2));\n    margin = Number((defaultMargin + delta * 2.1).toFixed(2));\n    margin = margin > highestMargin ? highestMargin : margin;\n  } else if (names.length === 1) {\n    maxSize = defaultSize;\n    maxMargin = defaultMargin;\n    names[0].removeAttribute('style');\n    addBtn.removeAttribute('style');\n    buyText.removeAttribute('style');\n  }\n\n  if (width && width > maxSize) {\n    maxSize = width;\n    maxMargin = margin;\n    names.forEach(function (name) {\n      name.style.width = \"\".concat(width, \"vw\");\n    });\n    addBtn.style.width = \"\".concat(width + 10, \"vw\");\n    buyText.style.marginRight = \"\".concat(margin, \"vw\");\n  }\n}\n/**\n * Set href attribute to sibling kp-link\n *\n * @param {Object} nameEl - name input\n */\n\n\nfunction createLink(nameEl) {\n  var name = nameEl.value;\n\n  if (name) {\n    nameEl.parentElement.parentElement.querySelector('.kp-link').href = encodeURI(\"https://www.kinopoisk.ru/s/type/all/find/\".concat(name, \"/\"));\n    nameEl.setAttribute('title', Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__[\"toTitle\"])(name));\n  } else {\n    nameEl.parentElement.parentElement.querySelector('.kp-link').href = 'https://www.kinopoisk.ru';\n    nameEl.setAttribute('title', 'Фильм, игра, etc');\n  }\n}\n/**\n * Trim name element value\n *\n * @param {Object} nameEl - name input\n */\n\n\nfunction trimValue(nameEl) {\n  nameEl.value = Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__[\"trim\"])(nameEl.value);\n}\n/**\n * Cut more than 2 spaces to one\n *\n * @param {Object} nameEl - name input\n */\n\n\nfunction oneSpacedValue(nameEl) {\n  nameEl.value = Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__[\"oneSpace\"])(nameEl.value);\n}\n\n//# sourceURL=webpack://woodsauc/./candidates.js?");

/***/ }),

/***/ "./notifications.js":
/*!**************************!*\
  !*** ./notifications.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n // ...\n\nvar playNotificationSound = function playNotificationSound() {\n  var audio = new Audio();\n  audio.src = '/static/sound/light.mp3';\n  audio.autoplay = true;\n}; // Open browser window if collapsed\n\n\nvar focusWindow = function focusWindow() {\n  window.focus();\n}; // Make notification element\n\n\nvar createNotification = function createNotification(title, options) {\n  var notification = new Notification(title, options);\n  notification.onclick = focusWindow;\n  return notification;\n}; // ...\n\n\nvar makeNotificationOptions = function makeNotificationOptions(title, body) {\n  return {\n    title: title,\n    body: body,\n    dir: 'ltr',\n    lang: 'ru',\n    icon: '/static/img/favicon/favicon.png'\n  };\n}; // Send it\n\n\nvar sendNotification = function sendNotification(title, body) {\n  var permission = Notification.permission;\n  var options = makeNotificationOptions(title, body); // Проверим, поддерживает ли браузер HTML5 Notifications\n\n  if (!('Notification' in window)) {\n    return;\n  } // Проверим, есть ли права на отправку уведомлений\n\n\n  if (permission === 'granted') {\n    // Если права есть, отправим уведомление\n    createNotification(title, options); // Если прав нет, пытаемся их получить\n  } else if (permission !== 'denied') {\n    Notification.requestPermission(function (permission) {\n      // Если права успешно получены, отправляем уведомление\n      if (permission === 'granted') {\n        createNotification(title, options);\n      }\n    });\n  }\n}; // Clear notification area\n\n\nvar clear = function clear() {\n  var notifications = document.getElementById('notifications-area');\n\n  while (notifications.children.length > 0) {\n    notifications.removeChild(notifications.firstChild);\n  }\n};\n\nvar notifications = {\n  playNotificationSound: playNotificationSound,\n  sendNotification: sendNotification,\n  clear: clear\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (notifications);\n\n//# sourceURL=webpack://woodsauc/./notifications.js?");

/***/ }),

/***/ "./script.js":
/*!*******************!*\
  !*** ./script.js ***!
  \*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var ripplet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ripplet.js */ \"../../node_modules/ripplet.js/es/ripplet.js\");\n/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timer */ \"./timer.js\");\n/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./notifications */ \"./notifications.js\");\n/* harmony import */ var _candidates__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./candidates */ \"./candidates.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./settings */ \"./settings.js\");\n\n\n\n\n\n\n\nvar firefox = navigator.userAgent.toLowerCase().includes('firefox');\nvar body = document.querySelector('body');\n\nif (firefox && !getCookie('bg-url')) {\n  body.style.backgroundImage = \"url('/static/img/bg/tree.jpg')\";\n}\n\nvar minsCookie = getCookie('previousMinutes');\nvar timerElement = document.getElementById('timer');\n\nif (minsCookie) {\n  timerElement.innerHTML = \"\".concat(minsCookie, \":00:00\");\n}\n\nvar timer = new _timer__WEBPACK_IMPORTED_MODULE_1__[\"default\"](timerElement);\nvar timerBtns = Array.from(document.getElementById('timer-btns').children);\nvar startBtn = document.getElementById('start-btn');\nvar stopBtn = document.getElementById('stop-btn');\nvar plusBtn = document.getElementById('plus-btn');\nvar plusTwoBtn = document.getElementById('plus-two-btn');\nvar minusBtn = document.getElementById('minus-btn');\nvar modalOverlay = document.getElementById('modal-overlay');\ntimerBtns.forEach(function (item) {\n  return item.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n});\nmodalOverlay.addEventListener('click', ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\ndocument.onkeydown = function (e) {\n  if (!modalOverlay.classList.contains('closed') && e.key === 'Escape') {\n    modalOverlay.click();\n  }\n};\n\nstartBtn.onclick = function () {\n  var mins = timerElement.innerHTML.split(':')[0];\n  if (mins) _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"].set('previousMinutes', mins);\n  timer.start();\n};\n\nstopBtn.onclick = function () {\n  if (timer.started) {\n    timer.timeStart = new Date(new Date() - timer.time + 300);\n    _notifications__WEBPACK_IMPORTED_MODULE_2__[\"default\"].clear();\n    timer.stop();\n  } else {\n    timer.reset();\n  }\n};\n\nplusBtn.onclick = function () {\n  return timer.plusOne();\n};\n\nplusTwoBtn.onclick = function () {\n  return timer.plusTwo();\n};\n\nminusBtn.onclick = function () {\n  return timer.minusOne();\n}; // Settings\n\n\nfunction changeBG(url) {\n  var bgImg = new Image();\n\n  if (url && url !== '') {\n    bgImg.onload = function () {\n      body.style.backgroundImage = \"url(\".concat(bgImg.src, \")\");\n    };\n\n    bgImg.src = url;\n  } else {\n    if (firefox) {\n      body.style.backgroundImage = \"url('/static/img/bg/tree.jpg')\";\n    } else {\n      body.style.backgroundImage = \"url('/static/img/bg/tree.webp')\";\n    }\n  }\n}\n\nfunction sheet(css) {\n  var style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n  return style;\n}\n\nfunction textSelect(inputElem) {\n  inputElem.focus();\n  inputElem.select();\n}\n\nvar showSettingsBtn = document.getElementById('settings-icon');\nvar settingsWindow = document.getElementById('settings');\nvar saveBGURLBtn = document.getElementById('save-bg-url-btn');\nvar clearBGURLBtn = document.getElementById('clear-bg-url-btn');\nvar bgURLInput = document.getElementById('bg-url');\nvar colorExctractor = document.getElementById('color-extractor');\nvar year = 31622400;\nvar bgURL = getCookie('bg-url');\nvar styleElement;\n\nbgURLInput.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  textSelect(this);\n};\n\nshowSettingsBtn.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  settingsWindow.classList.toggle(\"closed\");\n};\n\nfunction hexToRgb(hex) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n\nvar colorCookie = getCookie('accent'); // noinspection JSUnresolvedVariable\n\nripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"defaultOptions\"].clearingDuration = '.3s'; // noinspection JSUnresolvedVariable\n\nripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"defaultOptions\"].spreadingDuration = '.3s';\nvar color;\n\nif (colorCookie) {\n  var rgb = hexToRgb(colorCookie);\n  color = \"rgba(\".concat(rgb.r, \", \").concat(rgb.g, \", \").concat(rgb.b, \", .6)\");\n} else {\n  color = 'rgba(243, 151, 39, .6)';\n} // noinspection JSUnresolvedVariable\n\n\nripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"defaultOptions\"].color = color;\n\nif (colorCookie && colorCookie !== '') {\n  var accentShadow = hexToRgb(colorCookie);\n  accentShadow = \"rgba(\".concat(accentShadow.r, \", \").concat(accentShadow.g, \", \").concat(accentShadow.b, \", 0.7)\");\n  styleElement = sheet(\".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:\".concat(colorCookie, \"!important}\\ninput:focus{--accent:\").concat(colorCookie, \"!important;--shadow:\").concat(accentShadow, \"!important}\\n::selection{background:\").concat(accentShadow, \"!important}::-moz-selection{background:\").concat(accentShadow, \"}!important\"));\n} else {\n  styleElement = sheet(\".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\\ninput:focus{--accent:#f39727!important;--shadow:rgba(243, 151, 39, 0.7)!important}\\n::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}\");\n}\n/**\n * @return {boolean}\n */\n// function isUrlWork(url) {\n// TODO FIXME: async, await\n//   const http = new XMLHttpRequest();\n//\n//   try {\n//     http.open('HEAD', url, false);\n//     http.send();\n//     return http.status === 200;\n//   } catch (e) {\n//     console.log(e);\n//     return false;\n//   }\n// }\n\n\nfunction isUrlValid(url) {\n  var isUrl = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/i;\n  var isImg = /\\.(jpg|jpeg|png|gif|webp|svg)$/;\n  url = encodeURI(url);\n  return isImg.test(url) && isUrl.test(url);\n}\n\nfunction notification(text) {\n  var area = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  var p = document.createElement('p');\n  p.innerText = text;\n  p.setAttribute('title', text);\n  notification.appendChild(p);\n  notification.className = 'notification';\n  area.insertBefore(notification, area.firstElementChild);\n  _notifications__WEBPACK_IMPORTED_MODULE_2__[\"default\"].playNotificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n    }, 300);\n  }, 1200);\n}\n\nsaveBGURLBtn.onclick = function () {\n  var url = bgURLInput.value;\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n\n  if (!url) {\n    notification(\"Нет URL фона\");\n  } else {\n    if (url === getCookie('bg-url')) {\n      notification(\"Этот фон уже установлен\");\n    } else {\n      if (!isUrlValid(url)) {\n        notification(\"Введите корректный URL\");\n      } else {\n        changeBG(url);\n        notification(\"Фон обновлен\"); // Change Accent color\n\n        colorExctractor.setAttribute('src', \"https://cors-anywhere.herokuapp.com/\".concat(url));\n        colorExctractor.addEventListener('load', function () {\n          // noinspection JSUnresolvedFunction\n          var vibrant = new Vibrant(this); // noinspection JSUnresolvedFunction\n\n          var swatches = vibrant.swatches(); // noinspection JSUnresolvedFunction\n\n          var dominant = swatches['Vibrant'].getHex();\n          var shadow = hexToRgb(dominant); // noinspection JSUnresolvedVariable\n\n          ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"defaultOptions\"].color = \"rgba(\".concat(shadow.r, \", \").concat(shadow.g, \", \").concat(shadow.b, \", .6)\");\n          shadow = \"rgba(\".concat(shadow.r, \", \").concat(shadow.g, \", \").concat(shadow.b, \", .7)\");\n          styleElement.innerText = \".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:\".concat(dominant, \"!important}\\n                          input:focus{--accent:\").concat(dominant, \"!important;--shadow:\").concat(shadow, \"!important}\\n                          ::selection{background:\").concat(shadow, \"!important}::-moz-selection{background:\").concat(shadow, \"!important}\");\n          _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"].set('bg-url', url);\n          _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"].set('accent', dominant);\n        });\n      }\n    }\n  }\n};\n\nclearBGURLBtn.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n\n  if (!bgURLInput.value) {\n    notification(\"Фон уже сброшен\");\n  } else {\n    changeBG('');\n    bgURLInput.value = ''; // noinspection JSUnresolvedVariable\n\n    ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"defaultOptions\"].color = 'rgba(243, 151, 39, .6)';\n    styleElement.innerText = \".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\\n            input:focus{--accent:#f39727!important;--shadow:rgba(243,151,39,.7)!important});\\n            ::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}\";\n    _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"][\"delete\"]('bg-url');\n    _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"][\"delete\"]('accent');\n    notification(\"Фон сброшен\");\n  }\n};\n\nchangeBG(bgURL);\nbgURLInput.value = bgURL ? bgURL : ''; //DA URL\n\nvar daURL = document.getElementById('da-url');\nvar saveDAURLBtn = document.getElementById('save-da-url-btn');\nvar clearDAURLBtn = document.getElementById('clear-da-url-btn');\nvar tokenCookie = getCookie('token');\n\ndaURL.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  textSelect(this);\n};\n\ndaURL.value = tokenCookie ? tokenCookie : '';\n\nsaveDAURLBtn.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  var token = daURL.value;\n  _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"].set('token', token);\n  var notificationArea = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  notification.className = 'notification';\n  notification.innerHTML = \"<p title=\\\"\\u0422\\u043E\\u043A\\u0435\\u043D \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\\">\\u0422\\u043E\\u043A\\u0435\\u043D \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D</p>\";\n  notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n  _notifications__WEBPACK_IMPORTED_MODULE_2__[\"default\"].playNotificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n      location.reload();\n    }, 300);\n  }, 800);\n};\n\nclearDAURLBtn.onclick = function () {\n  Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  daURL.value = '';\n  _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"][\"delete\"]('token');\n  var notificationArea = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  notification.className = 'notification';\n  notification.innerHTML = \"<p title=\\\"\\u0422\\u043E\\u043A\\u0435\\u043D \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\\">\\u0422\\u043E\\u043A\\u0435\\u043D \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D</p>\";\n  notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n  _notifications__WEBPACK_IMPORTED_MODULE_2__[\"default\"].playNotificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n      location.reload();\n    }, 300);\n  }, 800);\n};\n\nvar urlsBtns = document.getElementsByClassName('special-url');\n\nfor (var i = 0; i < urlsBtns.length; i++) {\n  urlsBtns[i].onclick = function () {\n    Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arguments[0]);\n  };\n}\n\nif (Notification.permission === 'default') {\n  // noinspection JSIgnoredPromiseFromCall\n  Notification.requestPermission();\n} // DonationAlerts\n// try {\n//   // noinspection JSUnresolvedFunction\n//   const socket = io('https://socket.donationalerts.ru:443', {'reconnection': false});\n//   const token = getCookie('token');\n//   if (token) { // noinspection JSUnresolvedFunction\n//     socket.emit('add-user', {'token': token, 'type': 'minor'});\n//   }\n//   socket.on('donation', function (msg) {\n//     if (timer.started) {\n//       let msgJSON = JSON.parse(msg);\n//       if (msgJSON['alert_type'] === 1 || msgJSON['alert_type'] === '1') {\n//         let message = msgJSON['message'];\n//         message = message.replace(/\\s+/g, ' ');\n//         let amount = +msgJSON['amount'];\n//         // let currency = msgJSON['currency'];\n//         // console.log(message, amount, currency);\n//\n//         let names = document.getElementsByClassName('name');\n//         let costs = document.getElementsByClassName('cost');\n//         const notificationArea = document.getElementById('notifications-area');\n//\n//         let inserted = false;\n//         for (let i = 0; i < Math.min(names.length, costs.length); i++) {\n//           let name = names[i].value;\n//           // let cost = +costs[i].value;\n//\n//           if (name && message.toLowerCase().includes(name.toLowerCase())) {\n//             // console.log(`${name} in ${message}`);\n//             let notification = document.createElement('div');\n//             notification.className = 'notification';\n//\n//             // noinspection HtmlUnknownTarget\n//             notification.innerHTML =\n//               `<p></p>\n//                         <button class=\"notification-btn\" type=\"button\" title=\"Подтвердить\">\n//                             <img src=\"/static/img/icons/material/done.svg\" alt=\"Иконка подтверждения\">\n//                         </button>\n//                         <button class=\"notification-btn\" type=\"button\" title=\"Отклонить\">\n//                             <img src=\"/static/img/icons/material/clear.svg\" alt=\"Иконка очистки\">\n//                         </button>`;\n//\n//             notification.children[0].innerText =\n//               `Добавить ₽${amount} к \"${trim(toTitle(name))}\"?`;\n//             notification.children[0].setAttribute(\n//               'title',\n//               `Добавить ₽${amount} к \"${trim(toTitle(name))}\"?`);\n//\n//\n//             notification.children[1].onclick = function() {\n//               ripplet(arguments[0]);\n//               costs = document.getElementsByClassName('cost');\n//               names = document.getElementsByClassName('name');\n//               for (let i = 0; i < Math.min(names.length, costs.length); i++) {\n//                 let name = names[i].value;\n//                 let cost = +costs[i].value;\n//\n//                 if (name && message.toLowerCase().includes(name.toLowerCase())) {\n//                   costs[i].value = amount + cost;\n//                   checkOnBuy(costs[i]);\n//                   candidates.sort();\n//                   changeTitle(costs[i]);\n//                   notification.classList.add('hidden');\n//                   setTimeout(function () {\n//                     notification.remove();\n//                   }, 300);\n//                 }\n//               }\n//             };\n//\n//             notification.children[2].onclick = function() {\n//               ripplet(arguments[0]);\n//               notification.classList.add('hidden');\n//               setTimeout(function () {\n//                 notification.remove();\n//               }, 300);\n//             };\n//\n//             notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n//             notifications.playNotificationSound();\n//\n//             inserted = true;\n//             break;\n//           }\n//         }\n//\n//         if (!inserted) {\n//           let notification = document.createElement('div');\n//           notification.className = 'notification';\n//\n//           // noinspection HtmlUnknownTarget\n//           notification.innerHTML =\n//             `<p></p>\n//                     <button class=\"notification-btn\" type=\"button\" title=\"Подтвердить\">\n//                         <img src=\"/static/img/icons/material/done.svg\" alt=\"Иконка подтверждения\">\n//                     </button>\n//                     <button class=\"notification-btn\" type=\"button\" title=\"Отклонить\">\n//                         <img src=\"/static/img/icons/material/clear.svg\" alt=\"Иконка очистки\">\n//                     </button>`;\n//\n//           notification.children[0].innerText =\n//             `Создать \"${ trim( toTitle(message) ) }\" с ₽${amount}?`;\n//           notification.children[0].setAttribute(\n//             'title',\n//             `Создать \"${ trim( toTitle(message) ) }\" с ₽${amount}?`);\n//\n//           notification.children[1].onclick = function() {\n//             ripplet(arguments[0]);\n//\n//             let div = document.createElement('div');\n//             div.className = 'block';\n//\n//             div.innerHTML =\n//               `<label>\n//                            <input class=\"name\" type=\"text\" autocomplete=\"off\"\n//                            onkeyup=\"createLink(this);changeSize(this)\" onchange=\"changeSize(this)\"\n//                            placeholder=\"Позиция\" spellcheck=\"false\" onclick=\"ripplet(arguments[0])\">\n//                            <input onclick=\"ripplet(arguments[0])\" class=\"cost\" type=\"text\" min=\"0\" step=\"10\"\n//                              onchange=\"changeTitle(this);checksum(this);sortCandidates()\"\n//                              placeholder=\"₽\" value=\"${amount}\" autocomplete=\"off\">\n//                          </label>\n//                          <span>\n//                          <a href=\"https://www.kinopoisk.ru\" target=\"_blank\" class=\"kp-link\"\n//                            onclick=\"ripplet(arguments[0])\" title=\"Ссылка на кинопоиск\">\n//                            <img src=\"/static/img/icons/material/video-library.svg\"\n//                            alt=\"Иконка ссылки на кинопоиск\"></a>\n//                          <button type=\"button\" class=\"btn\"\n//                          onclick=\"ripplet(arguments[0]);removeRow(this)\" title=\"Удалить\">\n//                            <img src=\"/static/img/icons/material/delete.svg\" alt=\"Иконка удаления\">\n//                          </button>\n//                          </span>`;\n//\n//             div.children[0].children[0].value = message;\n//             div.children[0].children[0].setAttribute('title', message);\n//             div.children[0].children[1].setAttribute(\n//               'title', `Сумма: ${amount} ₽`);\n//\n//             changeSize(div.children[0].children[0]);\n//\n//             checkOnBuy(div.children[0].children[1]);\n//\n//             candidatesArea.insertBefore(div, candidatesArea.lastElementChild);\n//\n//             candidates.sort();\n//\n//             setTimeout(function () {\n//               div.classList.add('visible');\n//             }, 20);\n//\n//             for (let i = 0; i < names.length; i++) {\n//               createLink(names[i]);\n//             }\n//\n//             notification.classList.add('hidden');\n//             setTimeout(function () {\n//               notification.remove();\n//             }, 300);\n//           };\n//\n//           notification.children[2].onclick = function() {\n//             ripplet(arguments[0]);\n//\n//             notification.classList.add('hidden');\n//             setTimeout(function () {\n//               notification.remove();\n//             }, 300);\n//           };\n//\n//           notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n//           notifications.playNotificationSound();\n//         }\n//         let cuteMsg = message.replace(/\\s+$/, '');\n//         cuteMsg = cuteMsg.length > 30 ? `${cuteMsg.substr(0, 30)}...` : cuteMsg;\n//         notifications.sendNotification(`Новое пожертвование${!msgJSON['username'] ? '' :\n//                                             ` от ${msgJSON['username']}`}!`,\n//                                       `\"${cuteMsg}\" с ${amount}₽`)\n//       }\n//     }\n//   });\n// } catch (e) {\n//   console.log(\"Нет подключения, автодобавление не будет работать.\");\n// }\n\n//# sourceURL=webpack://woodsauc/./script.js?");

/***/ }),

/***/ "./settings.js":
/*!*********************!*\
  !*** ./settings.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n\nvar setCookie = function setCookie(name, value) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    'expires': year\n  };\n  var expires = options.expires;\n\n  if (typeof expires === 'number' && expires) {\n    var d = new Date();\n    d.setTime(d.getTime() + expires * 1000);\n    expires = options.expires = d;\n  }\n\n  if (expires && expires.toUTCString) {\n    options.expires = expires.toUTCString();\n  }\n\n  value = encodeURIComponent(value);\n  var updatedCookie = \"\".concat(name, \"=\").concat(value);\n\n  for (var propName in options) {\n    var propValue = options[propName];\n    updatedCookie += \"; \".concat(propName);\n\n    if (propValue !== true) {\n      updatedCookie += \"=\".concat(propValue);\n    }\n  }\n\n  document.cookie = updatedCookie;\n};\n\nvar deleteCookie = function deleteCookie(name) {\n  setCookie(name, '', {\n    'expires': -1\n  });\n};\n\nvar year = 31622400; // sec\n\nvar cookie = {\n  year: year,\n  set: setCookie,\n  \"delete\": deleteCookie\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (cookie);\n\n//# sourceURL=webpack://woodsauc/./settings.js?");

/***/ }),

/***/ "./stringUtilities.js":
/*!****************************!*\
  !*** ./stringUtilities.js ***!
  \****************************/
/*! exports provided: toTitle, trim, oneSpace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toTitle\", function() { return toTitle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"trim\", function() { return trim; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"oneSpace\", function() { return oneSpace; });\n\n\n // Make String Title Cased\n\nvar toTitle = function toTitle(s) {\n  return s.replace(/(^|\\s)\\S/g, function (t) {\n    return t.toUpperCase();\n  });\n}; // Make one space between words\n\n\nvar oneSpace = function oneSpace(s) {\n  return s.replace(/\\s+/g, ' ');\n}; // Remove spaces on the start and end of string\n\n\nvar trim = function trim(s) {\n  return s.replace(/\\s+$|^\\s+/g, '');\n};\n\n//# sourceURL=webpack://woodsauc/./stringUtilities.js?");

/***/ }),

/***/ "./timer.js":
/*!******************!*\
  !*** ./timer.js ***!
  \******************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _winner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./winner */ \"./winner.js\");\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Timer =\n/*#__PURE__*/\nfunction () {\n  function Timer(timerElem) {\n    _classCallCheck(this, Timer);\n\n    var arr = timerElem.innerHTML.split(':');\n    this.elem = timerElem;\n    this.m = +arr[0];\n    this.s = +arr[1];\n    this.ms = +arr[2];\n    this.time = new Date(this.m * 60000 + this.s * 1000 + this.ms);\n    this.started = false;\n    this.timeStart = new Date();\n  }\n\n  _createClass(Timer, [{\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      if (this.started) return;\n      if (!this.m) _winner__WEBPACK_IMPORTED_MODULE_0__[\"default\"].show();else {\n        this.timeStart = new Date();\n        this.m--;\n        this.started = true;\n        window.started = true; // () => ...() to resolve scope problems\n\n        requestAnimationFrame(function () {\n          return _this.updateTimer();\n        });\n      }\n    } // It's work when timer didnt started\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.elem.innerHTML = '00:00:00';\n      this.m = 0;\n      this.time = new Date(0);\n    } // This work when timer is running\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.elem.innerHTML = '00:00:00';\n      this.m = 0;\n      this.time = new Date(0);\n      this.started = false;\n      window.started = false;\n      cancelAnimationFrame(this.updateTimer);\n    }\n  }, {\n    key: \"minusOne\",\n    value: function minusOne() {\n      if (!this.m) return;\n      this.m--;\n\n      if (this.started) {\n        this.timeStart.setMinutes(this.timeStart.getMinutes() - 1);\n      } else {\n        this.m = this.m < 0 ? 0 : this.m;\n        this.time = new Date(this.m * 60000 + this.s * 1000 + this.ms);\n        timer.innerHTML = \"\".concat(this.m < 10 ? \"0\".concat(this.m) : this.m, \":00:00\");\n      }\n    }\n  }, {\n    key: \"plusOne\",\n    value: function plusOne() {\n      if (this.started) {\n        if (this.m !== 59) {\n          this.timeStart.setMinutes(this.timeStart.getMinutes() + 1);\n          this.m++;\n        }\n      } else {\n        this.m++;\n        this.m = this.m > 59 ? 59 : this.m;\n        this.time = new Date(this.m * 60000 + this.s * 1000 + this.ms);\n        timer.innerHTML = \"\".concat(this.m < 10 ? \"0\".concat(this.m) : this.m, \":00:00\");\n      }\n    }\n  }, {\n    key: \"plusTwo\",\n    value: function plusTwo() {\n      if (this.started) {\n        if (this.m === 58) {\n          this.timeStart.setMinutes(this.timeStart.getMinutes() + 1);\n          this.m++;\n        } else if (this.m < 58) {\n          this.timeStart.setMinutes(this.timeStart.getMinutes() + 2);\n          this.m += 2;\n        }\n      } else {\n        this.m += 2;\n        this.m = this.m > 59 ? 59 : this.m;\n        this.time = new Date(this.m * 60000 + this.s * 1000 + this.ms);\n        timer.innerHTML = \"\".concat(this.m < 10 ? \"0\".concat(this.m) : this.m, \":00:00\");\n      }\n    }\n  }, {\n    key: \"updateTimer\",\n    value: function updateTimer() {\n      var _this2 = this;\n\n      // console.log(`${this.m}:${this.s}`);\n      var current = new Date();\n      var delta = new Date(current - this.timeStart);\n      var result = new Date(this.time - delta);\n      var rm = result.getMinutes(); // result minutes\n\n      var rs = result.getSeconds(); // result seconds\n\n      var rms = result.getMilliseconds(); // result milliseconds\n\n      var winnerResult = _winner__WEBPACK_IMPORTED_MODULE_0__[\"default\"][\"return\"]();\n      this.m = rm;\n      this.s = rs;\n      this.ms = rms;\n\n      if (!rm && rs < 31 && !this.elem.classList.contains('danger')) {\n        this.elem.classList.add('danger');\n      } else if (this.elem.classList.contains('danger') && (rm || rs > 31)) {\n        this.elem.classList.remove('danger');\n      }\n\n      document.title = !winnerResult ? 'WoodsAuc' : \"\".concat(_winner__WEBPACK_IMPORTED_MODULE_0__[\"default\"].decorate(winnerResult), \" \\u043B\\u0438\\u0434\\u0438\\u0440\\u0443\\u0435\\u0442!\"); // minimal rms can't be 0, and it's totally random\n\n      if (!rm && !rs && rms < 300 || this.time < delta) {\n        this.stop();\n        _winner__WEBPACK_IMPORTED_MODULE_0__[\"default\"].show(_winner__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compile(winnerResult));\n      } else {\n        rm = rm < 10 ? \"0\".concat(rm) : rm;\n        rs = rs < 10 ? \"0\".concat(rs) : rs;\n        rms = rms < 10 ? \"0\".concat(rms) : rms;\n        rms = String(rms).substr(0, 2);\n        this.elem.innerHTML = \"\".concat(rm, \":\").concat(rs, \":\").concat(rms); // () => ...() to resolve scope problems\n\n        requestAnimationFrame(function () {\n          return _this2.updateTimer();\n        });\n      }\n    }\n  }]);\n\n  return Timer;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Timer);\n\n//# sourceURL=webpack://woodsauc/./timer.js?");

/***/ }),

/***/ "./winner.js":
/*!*******************!*\
  !*** ./winner.js ***!
  \*******************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notifications */ \"./notifications.js\");\n/* harmony import */ var _stringUtilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringUtilities */ \"./stringUtilities.js\");\n\n\n\n\nvar modal = document.getElementById('modal');\nvar modalOverlay = document.getElementById('modal-overlay');\nvar timerElement = document.getElementById('timer');\n/**\n  * Open modal window with winner result\n  *\n  * @param {string} [result] - ready compiled winner to show\n  */\n\nvar showWinner = function showWinner(result) {\n  if (!result) result = compileWinner(returnWinner());\n\n  if (!window.isBuy) {\n    modal.querySelector('p').innerText = result;\n    _notifications__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sendNotification('Аукцион окончен!', result);\n    document.title = result;\n  } else {\n    result = window.buyWinner;\n    modal.querySelector('p').innerText = \"\".concat(result, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438, \\u0430\\u0436 \\u0437\\u0430 \").concat(window.buyCost, \"\\u20BD Pog!\");\n    document.title = \"\".concat(result, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\");\n    _notifications__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sendNotification('Аукцион окончен!', \"\\u0412\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438 \".concat(result));\n  }\n\n  timerElement.classList.remove('danger');\n  _notifications__WEBPACK_IMPORTED_MODULE_0__[\"default\"].playNotificationSound();\n  modalOverlay.classList.toggle('closed');\n  modal.classList.toggle('closed');\n\n  modalOverlay.onclick = function () {\n    modal.classList.toggle('closed');\n    modalOverlay.classList.toggle('closed');\n    document.title = 'WoodsAuc';\n  };\n};\n/**\n  * Return raw position with max cost\n  *\n  * @return {(undefined|?string)} - if !cost - undefined,\n  *                                 if !name - null,\n  *                                 if name && cost - string\n  */\n\n\nvar returnWinner = function returnWinner() {\n  var names = document.getElementsByClassName('name');\n  var costs = Array.from(document.getElementsByClassName('cost')).map(function (cost) {\n    return Number(cost.value);\n  });\n  var maxCost = Math.max.apply(null, costs);\n  if (!maxCost) return;\n  var winner = names[costs.indexOf(maxCost)].value;\n  return !winner ? null : winner;\n};\n/**\n  * Join addEnding call with decorate\n  *\n  * @param {(undefined|?string)} winner - winner name from returnWinner\n  * @see returnWinner\n  * @return {string} - result of winner computing\n  */\n\n\nvar compileWinner = function compileWinner(winner) {\n  return addEnding(decorateWinner(winner));\n};\n/**\n  * Append last word to result phrase\n  *\n  * @param {(undefined|?string)} winner - winner name,\n  *                                       result from decorateWinner\n  * @see decorateWinner\n  * @return {string} - winner name + case ending\n  */\n\n\nvar addEnding = function addEnding(winner) {\n  var ending = winner ? 'победил' : winner === null ? 'победила' : 'победил';\n  return \"\".concat(humanizeWinner(winner), \" \").concat(ending, \"!\");\n};\n/**\n  * Add dots if larger than 20 chars and quotes lazy\n  *\n  * @param {(undefined|?string)} winner - winner name\n  * @see returnWinner\n  * @return {(undefined|?string)} - if !cost - undefined,\n  *                                 if !name - null,\n  *                                 if name && cost - string with handsome decoration\n  */\n\n\nvar decorateWinner = function decorateWinner(winner) {\n  if (!winner) return winner;\n  winner = Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_1__[\"toTitle\"])(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_1__[\"trim\"])(winner));\n  winner = winner.length < 20 ? winner : \"\".concat(winner.substr(0, 20), \"...\");\n  return JSON.stringify(winner);\n};\n/**\n  * Convert winner to human readable string\n  *\n  * @param {(undefined|?string)} winner - winner name\n  * @see returnWinner\n  * @return {string} - human readable result\n  */\n\n\nvar humanizeWinner = function humanizeWinner(winner) {\n  return winner ? winner : winner === null ? 'Пустая позиция' : 'Никто не';\n};\n\nvar winner = {\n  show: showWinner,\n  \"return\": returnWinner,\n  compile: compileWinner,\n  addEnding: addEnding,\n  decorate: decorateWinner,\n  humanize: humanizeWinner\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (winner);\n\n//# sourceURL=webpack://woodsauc/./winner.js?");

/***/ })

/******/ });