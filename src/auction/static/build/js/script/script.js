var woodsauc =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./script.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./script.js":
/*!*******************!*\
  !*** ./script.js ***!
  \*******************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval(" //TODO: timer animation\n//TODO: select from notification\n\nvar firefox = navigator.userAgent.toLowerCase().includes('firefox');\n\nif (firefox && !getCookie('bg-url')) {\n  document.querySelector('body').style.backgroundImage = \"url('/static/img/bg/tree.jpg')\";\n}\n\nfunction notificationSound() {\n  var audio = new Audio();\n  audio.src = '/static/sound/light.mp3';\n  audio.autoplay = true;\n} //Dynamic inputs\n\n\nvar defaultSize = 16.2;\nvar defaultMargin = 2.6;\nvar highestMargin = 35.4;\nvar maxSize = defaultSize;\nvar maxMargin = defaultMargin;\nvar styleForSize = document.createElement('style');\nstyleForSize.appendChild(document.createTextNode(\".name{width:\".concat(defaultSize, \"vw}\")));\ndocument.head.appendChild(styleForSize);\n\nfunction changeSize(nameElement) {\n  var width;\n  var margin;\n  var delta = nameElement.value.length - 10;\n  var names = document.getElementsByClassName('name');\n\n  if (delta > 0) {\n    width = defaultSize + delta * 2.1;\n    width = +width.toFixed(2);\n    margin = defaultMargin + delta * 2.1;\n    margin = margin.toFixed(2);\n    margin = margin > highestMargin ? highestMargin : margin;\n  } else if (names.length === 1) {\n    maxSize = defaultSize;\n    maxMargin = defaultMargin;\n    styleForSize.innerText = \".name{width:\".concat(defaultSize, \"vw}#add-btn{width:\").concat(defaultSize + 10, \"vw}.block-buy span{margin-right:\").concat(defaultMargin, \"vw}\");\n  }\n\n  if (width && width > maxSize) {\n    maxSize = width;\n    maxMargin = margin;\n    styleForSize.innerText = \".name{width:\".concat(width, \"vw}#add-btn{width:\").concat(width + 10, \"vw!important}.block-buy span{margin-right:\").concat(margin, \"vw!important}\");\n  }\n} //Title case\n\n\nString.prototype.toTitle = function () {\n  return this.replace(/(^|\\s)\\S/g, function (t) {\n    return t.toUpperCase();\n  });\n}; // Truncate string\n\n\nString.prototype.truncate = function () {\n  return this.replace(/\\s+$/, '').replace(/^\\s+/, '');\n}; // DonationAlerts\n\n\nvar started = false;\n\ntry {\n  // noinspection JSUnresolvedFunction\n  var socket = io('https://socket.donationalerts.ru:443', {\n    'reconnection': false\n  });\n  var token = getCookie('token');\n\n  if (token) {\n    // noinspection JSUnresolvedFunction\n    socket.emit('add-user', {\n      'token': token,\n      'type': 'minor'\n    });\n  }\n\n  socket.on('donation', function (msg) {\n    if (started) {\n      var msgJSON = JSON.parse(msg);\n\n      if (msgJSON['alert_type'] === 1 || msgJSON['alert_type'] === '1') {\n        (function () {\n          var message = msgJSON['message'];\n          message = message.replace(/\\s+/g, ' ');\n          var amount = +msgJSON['amount']; // let currency = msgJSON['currency'];\n          // console.log(message, amount, currency);\n\n          var names = document.getElementsByClassName('name');\n          var costs = document.getElementsByClassName('cost');\n          var notificationArea = document.getElementById('notifications-area');\n          var inserted = false;\n\n          for (var i = 0; i < Math.min(names.length, costs.length); i++) {\n            var name = names[i].value; // let cost = +costs[i].value;\n\n            if (name && message.toLowerCase().includes(name.toLowerCase())) {\n              var _ret = function () {\n                // console.log(`${name} in ${message}`);\n                var notification = document.createElement('div');\n                notification.className = 'notification'; // noinspection HtmlUnknownTarget\n\n                notification.innerHTML = \"<p></p>\\n                        <button class=\\\"notification-btn\\\" type=\\\"button\\\" title=\\\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C\\\">\\n                            <img src=\\\"/static/img/icons/material/done.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\\\">\\n                        </button>\\n                        <button class=\\\"notification-btn\\\" type=\\\"button\\\" title=\\\"\\u041E\\u0442\\u043A\\u043B\\u043E\\u043D\\u0438\\u0442\\u044C\\\">\\n                            <img src=\\\"/static/img/icons/material/clear.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043E\\u0447\\u0438\\u0441\\u0442\\u043A\\u0438\\\">\\n                        </button>\";\n                notification.children[0].innerText = \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u20BD\".concat(amount, \" \\u043A \\\"\").concat(name.toTitle().replace(/\\s+$/, ''), \"\\\"?\");\n                notification.children[0].setAttribute('title', \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u20BD\".concat(amount, \" \\u043A \\\"\").concat(name.toTitle().replace(/\\s+$/, ''), \"\\\"?\"));\n\n                notification.children[1].onclick = function () {\n                  ripplet(arguments[0]);\n                  costs = document.getElementsByClassName('cost');\n                  names = document.getElementsByClassName('name');\n\n                  for (var _i = 0; _i < Math.min(names.length, costs.length); _i++) {\n                    var _name = names[_i].value;\n                    var cost = +costs[_i].value;\n\n                    if (_name && message.toLowerCase().includes(_name.toLowerCase())) {\n                      costs[_i].value = amount + cost;\n                      checkOnBuy(costs[_i]);\n                      sortCandidates();\n                      changeTitle(costs[_i]);\n                      notification.classList.add('hidden');\n                      setTimeout(function () {\n                        notification.remove();\n                      }, 300);\n                    }\n                  }\n                };\n\n                notification.children[2].onclick = function () {\n                  ripplet(arguments[0]);\n                  notification.classList.add('hidden');\n                  setTimeout(function () {\n                    notification.remove();\n                  }, 300);\n                };\n\n                notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n                notificationSound();\n                inserted = true;\n                return \"break\";\n              }();\n\n              if (_ret === \"break\") break;\n            }\n          }\n\n          if (!inserted) {\n            var _notification = document.createElement('div');\n\n            _notification.className = 'notification'; // noinspection HtmlUnknownTarget\n\n            _notification.innerHTML = \"<p></p>\\n                    <button class=\\\"notification-btn\\\" type=\\\"button\\\" title=\\\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C\\\">\\n                        <img src=\\\"/static/img/icons/material/done.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\\\">\\n                    </button>\\n                    <button class=\\\"notification-btn\\\" type=\\\"button\\\" title=\\\"\\u041E\\u0442\\u043A\\u043B\\u043E\\u043D\\u0438\\u0442\\u044C\\\">\\n                        <img src=\\\"/static/img/icons/material/clear.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043E\\u0447\\u0438\\u0441\\u0442\\u043A\\u0438\\\">\\n                    </button>\";\n            _notification.children[0].innerText = \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\\"\".concat(message.toTitle().replace(/\\s+$/, ''), \"\\\" \\u0441 \\u20BD\").concat(amount, \"?\");\n\n            _notification.children[0].setAttribute('title', \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\\"\".concat(message.toTitle().replace(/\\s+$/, ''), \"\\\" \\u0441 \\u20BD\").concat(amount, \"?\"));\n\n            _notification.children[1].onclick = function () {\n              ripplet(arguments[0]);\n              var div = document.createElement('div');\n              div.className = 'block';\n              div.innerHTML = \"<label>\\n                           <input class=\\\"name\\\" type=\\\"text\\\" autocomplete=\\\"off\\\"\\n                           onkeyup=\\\"createLink(this);changeSize(this)\\\" onchange=\\\"changeSize(this)\\\"\\n                           placeholder=\\\"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F\\\" spellcheck=\\\"false\\\" onclick=\\\"ripplet(arguments[0])\\\">\\n                           <input onclick=\\\"ripplet(arguments[0])\\\" class=\\\"cost\\\" type=\\\"text\\\" min=\\\"0\\\" step=\\\"10\\\" \\n                             onchange=\\\"changeTitle(this);checksum(this);sortCandidates()\\\" \\n                             placeholder=\\\"\\u20BD\\\" value=\\\"\".concat(amount, \"\\\" autocomplete=\\\"off\\\">\\n                         </label>\\n                         <span>\\n                         <a href=\\\"https://www.kinopoisk.ru\\\" target=\\\"_blank\\\" class=\\\"kp-link\\\"\\n                           onclick=\\\"ripplet(arguments[0])\\\" title=\\\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0438\\u043D\\u043E\\u043F\\u043E\\u0438\\u0441\\u043A\\\">\\n                           <img src=\\\"/static/img/icons/material/video-library.svg\\\" \\n                           alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0438 \\u043D\\u0430 \\u043A\\u0438\\u043D\\u043E\\u043F\\u043E\\u0438\\u0441\\u043A\\\"></a>\\n                         <button type=\\\"button\\\" class=\\\"btn\\\" \\n                         onclick=\\\"ripplet(arguments[0]);removeRow(this)\\\" title=\\\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\\\">\\n                           <img src=\\\"/static/img/icons/material/delete.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u044F\\\">\\n                         </button>\\n                         </span>\");\n              div.children[0].children[0].value = message;\n              div.children[0].children[0].setAttribute('title', message);\n              div.children[0].children[1].setAttribute('title', \"\\u0421\\u0443\\u043C\\u043C\\u0430: \".concat(amount, \" \\u20BD\"));\n              changeSize(div.children[0].children[0]);\n              checkOnBuy(div.children[0].children[1]);\n              candidatesArea.insertBefore(div, candidatesArea.lastElementChild);\n              sortCandidates();\n              setTimeout(function () {\n                div.classList.add('visible');\n              }, 20);\n\n              for (var _i2 = 0; _i2 < names.length; _i2++) {\n                createLink(names[_i2]);\n              }\n\n              _notification.classList.add('hidden');\n\n              setTimeout(function () {\n                _notification.remove();\n              }, 300);\n            };\n\n            _notification.children[2].onclick = function () {\n              ripplet(arguments[0]);\n\n              _notification.classList.add('hidden');\n\n              setTimeout(function () {\n                _notification.remove();\n              }, 300);\n            };\n\n            notificationArea.insertBefore(_notification, notificationArea.firstElementChild);\n            notificationSound();\n          }\n\n          var cuteMsg = message.replace(/\\s+$/, '');\n          cuteMsg = cuteMsg.length > 30 ? \"\".concat(cuteMsg.substr(0, 30), \"...\") : cuteMsg;\n          sendNotification(\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043F\\u043E\\u0436\\u0435\\u0440\\u0442\\u0432\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\".concat(msgJSON['username'] ? \" \\u043E\\u0442 \".concat(msgJSON['username']) : '', \"!\"), {\n            'body': \"\\\"\".concat(cuteMsg, \"\\\" \\u0441 \").concat(amount, \"\\u20BD\"),\n            'dir': 'ltr',\n            'lang': 'ru',\n            'icon': '/static/img/favicon/favicon.png'\n          });\n        })();\n      }\n    }\n  });\n} catch (e) {\n  console.log(\"Нет подключения, автодобавление не будет работать.\");\n} // Timer\n\n\nfunction returnWinner() {\n  var winner = undefined;\n  var maxCost = null;\n  var names = document.getElementsByClassName('name');\n  var costs = document.getElementsByClassName('cost');\n\n  for (var i = 0; i < Math.min(names.length, costs.length); i++) {\n    var name = names[i].value;\n    var cost = +costs[i].value;\n\n    if (cost > maxCost) {\n      maxCost = cost;\n      winner = name ? name : winner;\n    }\n  }\n\n  if (maxCost) winner = winner.toTitle();\n  return winner ? \"\\\"\".concat(winner.truncate(), \"\\\"\") : \"Никто не \";\n}\n\nfunction showWinner() {\n  var modal = document.querySelector('#modal');\n  var modalOverlay = document.querySelector('#modal-overlay');\n  timer.classList.remove('danger');\n\n  modalOverlay.onclick = function () {\n    ripplet(arguments[0]);\n    modal.classList.toggle('closed');\n    modalOverlay.classList.toggle('closed');\n    document.title = \"Аукцион β\";\n  };\n\n  var winner = returnWinner();\n\n  if (isBuy) {\n    modal.children[0].innerText = \"\\\"\".concat(buyWinner, \"\\\" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438, \\u0430\\u0436 \\u0437\\u0430 \").concat(buyCost, \"\\u20BD Pog!\");\n    document.title = buyWinner.length > 30 ? \"\".concat(buyWinner.substring(0, 30), \"... \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\") : \"\".concat(buyWinner, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\");\n    sendNotification(\"Аукцион окончен!\", {\n      'body': \"\\u0412\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438 \\\"\".concat(buyWinner.length > 30 ? \"\".concat(buyWinner.substring(0, 30), \"...\") : buyWinner, \"\\\"!\"),\n      'dir': 'ltr',\n      'lang': 'ru',\n      'icon': '/static/img/favicon/favicon.png'\n    });\n  } else {\n    modal.children[0].innerText = \"\".concat(winner, \" \\u043F\\u043E\\u0431\\u0435\\u0434\\u0438\\u043B!\");\n    document.title = winner.length > 30 ? \"\".concat(winner.substring(0, 30), \"... \\u043F\\u043E\\u0431\\u0435\\u0434\\u0438\\u043B!\") : \"\".concat(winner, \" \\u043F\\u043E\\u0431\\u0435\\u0434\\u0438\\u043B!\");\n\n    if (winner === \"Никто не \") {\n      sendNotification(\"Аукцион окончен!\", {\n        'body': \"Никто не победил :(\",\n        'dir': 'ltr',\n        'lang': 'ru',\n        'icon': '/static/img/favicon/favicon.png'\n      });\n    } else {\n      sendNotification(\"Аукцион окончен!\", {\n        'body': \"\\u041F\\u043E\\u0431\\u0435\\u0434\\u0430 \".concat(winner.length > 30 ? \"\".concat(winner.substring(0, 30), \"...\\\"\") : winner, \"!\"),\n        'dir': 'ltr',\n        'lang': 'ru',\n        'icon': '/static/img/favicon/favicon.png'\n      });\n    }\n  }\n\n  modalOverlay.classList.toggle('closed');\n  modal.classList.toggle('closed');\n  notificationSound();\n}\n\nvar startTime;\nvar timer = document.getElementById('timer');\nvar minsCookie = getCookie('previousMinutes');\n\nif (minsCookie) {\n  timer.innerHTML = \"\".concat(minsCookie, \":00:00\");\n}\n\nvar timerArray = timer.innerHTML.split(':');\nvar m = +timerArray[0],\n    s = +timerArray[1],\n    ms = +timerArray[2];\nvar timerTime = new Date(60000 * m + 1000 * s + ms);\n\nfunction updateTimer() {\n  var currTime = new Date();\n  var deltaTime = new Date(currTime - startTime);\n  var resultTime = new Date(timerTime - deltaTime);\n  var rm = resultTime.getMinutes(); // result minutes\n\n  var rs = resultTime.getSeconds(); // result seconds\n\n  var rms = resultTime.getMilliseconds(); // result milliseconds\n\n  if (!rm && rs < 30) {\n    timer.classList.add('danger');\n  } else {\n    timer.classList.remove('danger');\n  } // if (!(rs % 2)) {\n\n\n  var winner = returnWinner();\n\n  if (winner !== \"Никто не \") {\n    winner = winner.length > 30 ? \"\".concat(winner.substr(0, 30), \"...\\\"\") : winner;\n    document.title = \"\".concat(winner, \" - \\u0410\\u0443\\u043A\\u0446\\u0438\\u043E\\u043D \\u03B2\");\n  } else {\n    document.title = 'Аукцион β';\n  } // }\n\n\n  if (!rm && !rs && rms < 300 || timerTime < deltaTime) {\n    // minimal rms can't be 0, and it's totally random\n    cancelAnimationFrame(updateTimer);\n    timer.innerHTML = '00:00:00';\n    showWinner();\n    started = false;\n  } else {\n    rm = rm < 10 ? \"0\".concat(rm) : rm;\n    rs = rs < 10 ? \"0\".concat(rs) : rs;\n    rms = rms < 10 ? \"0\".concat(rms) : rms;\n    rms = String(rms).substr(0, 2);\n    timer.innerHTML = \"\".concat(rm, \":\").concat(rs, \":\").concat(rms);\n    requestAnimationFrame(updateTimer);\n  }\n}\n\nfunction startTimer() {\n  var minutes = +timer.innerHTML.split(':')[0];\n\n  if (!started) {\n    if (!minutes) {\n      showWinner();\n    } else {\n      startTime = new Date();\n      requestAnimationFrame(updateTimer);\n      started = true;\n    }\n  }\n}\n\nvar startBtn = document.getElementById('start-btn');\nvar resetBtn = document.getElementById('stop-btn');\nvar plusBtn = document.getElementById('plus-btn');\nvar plusTwoBtn = document.getElementById('plus-two-btn');\nvar minusBtn = document.getElementById('minus-btn');\n\nstartBtn.onclick = function () {\n  var mins = timer.innerHTML.split(':')[0];\n  ripplet(arguments[0]);\n\n  if (mins) {\n    setCookie('previousMinutes', mins, {\n      'expires': year\n    });\n  }\n\n  startTimer();\n};\n\nresetBtn.onclick = function () {\n  ripplet(arguments[0]);\n\n  if (started) {\n    startTime = new Date(new Date() - timerTime + 300);\n    var notificationArea = document.getElementById('notifications-area');\n\n    while (notificationArea.children.length > 0) {\n      notificationArea.removeChild(notificationArea.firstChild);\n    }\n\n    started = false;\n  } else {\n    m = 0;\n    timerTime = new Date(0);\n    timer.innerHTML = '00:00:00';\n  }\n};\n\nplusBtn.onclick = function () {\n  ripplet(arguments[0]);\n  timerArray = timer.innerHTML.split(':');\n  var mins = +timerArray[0];\n\n  if (started) {\n    if (mins !== 59) {\n      startTime.setMinutes(startTime.getMinutes() + 1);\n    }\n  } else {\n    var rm;\n    m = +timerArray[0] + 1;\n    m = m > 59 ? 59 : m;\n    timerTime = new Date(60000 * m + 1000 * s + ms);\n    rm = m < 10 ? \"0\".concat(m) : m;\n    timer.innerHTML = \"\".concat(rm, \":00:00\");\n  }\n};\n\nplusTwoBtn.onclick = function () {\n  ripplet(arguments[0]);\n  timerArray = timer.innerHTML.split(':');\n  var mins = +timerArray[0];\n\n  if (started) {\n    if (mins === 58) {\n      startTime.setMinutes(startTime.getMinutes() + 1);\n    } else if (mins < 58) {\n      startTime.setMinutes(startTime.getMinutes() + 2);\n    }\n  } else {\n    var rm;\n    m = +timerArray[0] + 2;\n    m = m > 59 ? 59 : m;\n    timerTime = new Date(60000 * m + 1000 * s + ms);\n    rm = m < 10 ? \"0\".concat(m) : m;\n    timer.innerHTML = \"\".concat(rm, \":00:00\");\n  }\n};\n\nminusBtn.onclick = function () {\n  var minutes = +timer.innerHTML.split(':')[0];\n  ripplet(arguments[0]);\n\n  if (minutes) {\n    if (started) {\n      startTime.setMinutes(startTime.getMinutes() - 1);\n    } else {\n      var rm;\n      timerArray = timer.innerHTML.split(':');\n      m = +timerArray[0] - 1;\n      timerTime = new Date(60000 * m + 1000 * s + ms);\n      rm = m < 10 ? \"0\".concat(m) : m;\n      timer.innerHTML = \"\".concat(rm, \":00:00\");\n    }\n  }\n}; // Candidates\n\n\nfunction sortCandidates() {\n  var total = [];\n  var names = document.getElementsByClassName('name');\n  var costs = document.getElementsByClassName('cost');\n\n  for (var i = 0; i < Math.min(names.length, costs.length); i++) {\n    var name = names[i].value;\n    var cost = +costs[i].value;\n    var titleName = names[i].getAttribute('title');\n    var titleCost = costs[i].getAttribute('title');\n    var link = names[i].parentNode.parentNode.children[1].children[0].href;\n    total.push({\n      'name': name,\n      'cost': cost,\n      'titleName': titleName,\n      'titleCost': titleCost,\n      'link': link\n    });\n  }\n\n  total = total.sort(function (e1, e2) {\n    return e1.cost - e2.cost;\n  }).reverse(); // console.log(total);\n\n  for (var _i3 = 0; _i3 < Math.min(names.length, costs.length); _i3++) {\n    var _cost = total[_i3].cost;\n    costs[_i3].value = _cost === 0 ? '' : _cost;\n    names[_i3].value = total[_i3].name;\n\n    names[_i3].setAttribute('title', total[_i3].titleName);\n\n    costs[_i3].setAttribute('title', total[_i3].titleCost);\n\n    names[_i3].parentNode.parentNode.children[1].children[0].href = total[_i3].link;\n  }\n}\n\nfunction clearRow() {\n  var candidateArea = document.getElementById('candidates-area');\n  var label = candidateArea.children[1].children[0];\n  var link = candidateArea.children[1].children[1].children[0];\n  label.children[0].value = '';\n  label.children[1].value = '';\n  label.children[0].setAttribute('title', 'Фильм, игра, etc');\n  label.children[1].setAttribute('title', 'Сумма');\n  link.href = 'https://www.kinopoisk.ru';\n  changeSize(label.children[0]);\n}\n\nfunction removeRow(delBtn) {\n  setTimeout(function () {\n    try {\n      delBtn.parentNode.parentNode.parentNode.removeChild(delBtn.parentNode.parentNode);\n    } catch (e) {} // Get back to default size after delete last non-empty row\n\n\n    var names = document.getElementsByClassName('name');\n\n    if (names.length === 1 && !names[0].value) {\n      maxSize = defaultSize;\n      styleForSize.innerText = \".name{width:\".concat(defaultSize, \"vw}#add-btn{width:\").concat(defaultSize + 10, \"vw}\");\n    }\n  }, 200);\n}\n\nfunction trim(string) {\n  return string.replace(/^\\s+/, '').replace(/\\s{2,}$/, '').replace(/\\s+/g, ' ');\n}\n\nfunction createLink(nameElement) {\n  nameElement.value = trim(nameElement.value);\n  var name = nameElement.value;\n\n  if (name) {\n    nameElement.parentNode.parentNode.children[1].children[0].href = encodeURI(\"https://www.kinopoisk.ru/s/type/all/find/\".concat(name, \"/\"));\n    nameElement.setAttribute('title', name.toTitle());\n  } else {\n    nameElement.parentNode.parentNode.children[1].children[0].href = 'https://www.kinopoisk.ru';\n    nameElement.setAttribute('title', \"Фильм, игра, etc\");\n  }\n}\n\nvar addBtn = document.getElementById('add-btn');\nvar candidatesArea = document.getElementById('candidates-area');\n\naddBtn.onclick = function () {\n  var div = document.createElement('div');\n  div.className = 'block'; // noinspection HtmlUnknownTarget\n\n  div.innerHTML = \"<label>\\n           <input class=\\\"name\\\" type=\\\"text\\\" onkeyup=\\\"createLink(this);changeSize(this)\\\"  onchange=\\\"changeSize(this)\\\"\\n             onclick=\\\"ripplet(arguments[0])\\\" title=\\\"\\u0424\\u0438\\u043B\\u044C\\u043C, \\u0438\\u0433\\u0440\\u0430, etc\\\" autocomplete=\\\"off\\\" placeholder=\\\"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F\\\" spellcheck=\\\"false\\\">\\n           <input class=\\\"cost\\\" type=\\\"text\\\" min=\\\"0\\\" step=\\\"10\\\" placeholder=\\\"\\u20BD\\\" title=\\\"\\u0421\\u0443\\u043C\\u043C\\u0430\\\"\\n             onclick=\\\"ripplet(arguments[0])\\\" onchange=\\\"changeTitle(this);checksum(this);sortCandidates();checkOnBuy(this)\\\" autocomplete=\\\"off\\\">\\n         </label>\\n         <span>\\n         <a href=\\\"https://www.kinopoisk.ru\\\" target=\\\"_blank\\\" class=\\\"kp-link\\\" \\n           onclick=\\\"ripplet(arguments[0])\\\" title=\\\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0438\\u043D\\u043E\\u043F\\u043E\\u0438\\u0441\\u043A\\\">\\n           <img src=\\\"static/img/icons/material/video-library.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0438 \\u043D\\u0430 \\u043A\\u0438\\u043D\\u043E\\u043F\\u043E\\u0438\\u0441\\u043A\\\"></a>\\n         <button type=\\\"button\\\" class=\\\"btn\\\" \\n           onclick=\\\"ripplet(arguments[0]);removeRow(this)\\\" title=\\\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\\\">\\n           <img src=\\\"/static/img/icons/material/delete.svg\\\" alt=\\\"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u044F\\\">\\n         </button>\\n        </span>\";\n  candidatesArea.insertBefore(div, candidatesArea.lastElementChild);\n  ripplet(arguments[0]);\n  setTimeout(function () {\n    div.classList.add('visible');\n  }, 10);\n  div.children[0].children[0].focus();\n  sortCandidates();\n}; // Settings\n// Set cookie is in index.html\n\n\nfunction setCookie(name, value, options) {\n  options = options || {};\n  var expires = options.expires;\n\n  if (typeof expires == 'number' && expires) {\n    var d = new Date();\n    d.setTime(d.getTime() + expires * 1000);\n    expires = options.expires = d;\n  }\n\n  if (expires && expires.toUTCString) {\n    options.expires = expires.toUTCString();\n  }\n\n  value = encodeURIComponent(value);\n  var updatedCookie = \"\".concat(name, \"=\").concat(value);\n\n  for (var propName in options) {\n    updatedCookie += \"; \" + propName; // noinspection JSUnfilteredForInLoop\n\n    var propValue = options[propName];\n\n    if (propValue !== true) {\n      updatedCookie += \"=\" + propValue;\n    }\n  }\n\n  document.cookie = updatedCookie;\n}\n\nfunction changeBG(url) {\n  var body = document.querySelector('body');\n  var bgImg = new Image();\n\n  if (url && url !== '') {\n    bgImg.onload = function () {\n      body.style.backgroundImage = \"url(\".concat(bgImg.src, \")\");\n    };\n\n    bgImg.src = url;\n  } else {\n    if (firefox) {\n      body.style.backgroundImage = \"url('/static/img/bg/tree.jpg')\";\n    } else {\n      body.style.backgroundImage = \"url('/static/img/bg/tree.webp')\";\n    }\n  }\n}\n\nfunction sheet(css) {\n  var style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  document.head.appendChild(style);\n  return style;\n}\n\nfunction textSelect(inputElem) {\n  inputElem.focus();\n  inputElem.select();\n}\n\nvar showSettingsBtn = document.getElementById('settings-icon');\nvar settingsWindow = document.getElementById('settings');\nvar saveBGURLBtn = document.getElementById('save-bg-url-btn');\nvar clearBGURLBtn = document.getElementById('clear-bg-url-btn');\nvar bgURLInput = document.getElementById('bg-url');\nvar colorExctractor = document.getElementById('color-extractor');\nvar year = 31622400;\nvar bgURL = getCookie('bg-url');\nvar styleElement;\n\nbgURLInput.onclick = function () {\n  ripplet(arguments[0]);\n  textSelect(this);\n};\n\nshowSettingsBtn.onclick = function () {\n  ripplet(arguments[0]);\n  settingsWindow.classList.toggle(\"closed\");\n};\n\nfunction hexToRgb(hex) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n\nvar colorCookie = getCookie('accent'); // noinspection JSUnresolvedVariable\n\nripplet.defaultOptions.clearingDuration = '.3s'; // noinspection JSUnresolvedVariable\n\nripplet.defaultOptions.spreadingDuration = '.3s';\nvar color;\n\nif (colorCookie) {\n  var rgb = hexToRgb(colorCookie);\n  color = \"rgba(\".concat(rgb.r, \", \").concat(rgb.g, \", \").concat(rgb.b, \", .6)\");\n} else {\n  color = 'rgba(243, 151, 39, .6)';\n} // noinspection JSUnresolvedVariable\n\n\nripplet.defaultOptions.color = color;\n\nif (colorCookie && colorCookie !== '') {\n  var accentShadow = hexToRgb(colorCookie);\n  accentShadow = \"rgba(\".concat(accentShadow.r, \", \").concat(accentShadow.g, \", \").concat(accentShadow.b, \", 0.7)\");\n  styleElement = sheet(\".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:\".concat(colorCookie, \"!important}\\ninput:focus{--accent:\").concat(colorCookie, \"!important;--shadow:\").concat(accentShadow, \"!important}\\n::selection{background:\").concat(accentShadow, \"!important}::-moz-selection{background:\").concat(accentShadow, \"}!important\"));\n} else {\n  styleElement = sheet(\".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\\ninput:focus{--accent:#f39727!important;--shadow:rgba(243, 151, 39, 0.7)!important}\\n::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}\");\n}\n/**\n * @return {boolean}\n */\n\n\nfunction isUrlWork(url) {\n  var http = new XMLHttpRequest();\n\n  try {\n    http.open('HEAD', url, false);\n    http.send();\n    return http.status === 200;\n  } catch (e) {\n    console.log(e);\n    return false;\n  }\n}\n\nfunction isUrlValid(url) {\n  // noinspection RegExpRedundantEscape\n  var objRE = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&/=]*)/i;\n  return objRE.test(url);\n}\n\nfunction notification(text) {\n  var tray = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  var p = document.createElement('p');\n  p.innerText = text;\n  p.setAttribute('title', text);\n  notification.appendChild(p);\n  notification.className = 'notification';\n  tray.insertBefore(notification, tray.firstElementChild);\n  notificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n    }, 300);\n  }, 1200);\n}\n\nsaveBGURLBtn.onclick = function () {\n  var url = bgURLInput.value;\n  ripplet(arguments[0]);\n\n  if (!url) {\n    notification(\"Нет URL фона\");\n  } else {\n    if (url === getCookie('bg-url')) {\n      notification(\"Этот фон уже установлен\");\n    } else {\n      if (!isUrlValid(url)) {\n        notification(\"Введите корректный URL\");\n      } else {\n        if (!isUrlWork(\"https://cors-anywhere.herokuapp.com/\".concat(url))) {\n          notification(\"URL неверный, или не отвечает\");\n        } else {\n          changeBG(url);\n          notification(\"Фон обновлен\"); // Change Accent color\n\n          colorExctractor.setAttribute('src', \"https://cors-anywhere.herokuapp.com/\".concat(url));\n          colorExctractor.addEventListener('load', function () {\n            // noinspection JSUnresolvedFunction\n            var vibrant = new Vibrant(this); // noinspection JSUnresolvedFunction\n\n            var swatches = vibrant.swatches(); // noinspection JSUnresolvedFunction\n\n            var dominant = swatches['Vibrant'].getHex();\n            var shadow = hexToRgb(dominant); // noinspection JSUnresolvedVariable\n\n            ripplet.defaultOptions.color = \"rgba(\".concat(shadow.r, \", \").concat(shadow.g, \", \").concat(shadow.b, \", .6)\");\n            shadow = \"rgba(\".concat(shadow.r, \", \").concat(shadow.g, \", \").concat(shadow.b, \", .7)\");\n            styleElement.innerText = \".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:\".concat(dominant, \"!important}\\n                            input:focus{--accent:\").concat(dominant, \"!important;--shadow:\").concat(shadow, \"!important}\\n                            ::selection{background:\").concat(shadow, \"!important}::-moz-selection{background:\").concat(shadow, \"!important}\");\n            setCookie('bg-url', url, {\n              'expires': year\n            });\n            setCookie('accent', dominant, {\n              'expires': year\n            });\n          });\n        }\n      }\n    }\n  }\n};\n\nclearBGURLBtn.onclick = function () {\n  ripplet(arguments[0]);\n\n  if (!bgURLInput.value) {\n    notification(\"Фон уже сброшен\");\n  } else {\n    changeBG('');\n    bgURLInput.value = ''; // noinspection JSUnresolvedVariable\n\n    ripplet.defaultOptions.color = 'rgba(243, 151, 39, .6)';\n    styleElement.innerText = \".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\\n            input:focus{--accent:#f39727!important;--shadow:rgba(243,151,39,.7)!important});\\n            ::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}\";\n    setCookie('bg-url', '', {\n      'expires': year\n    });\n    setCookie('accent', '', {\n      'expires': year\n    });\n    notification(\"Фон сброшен\");\n  }\n};\n\nchangeBG(bgURL);\nbgURLInput.value = bgURL ? bgURL : ''; //DA URL\n\nvar daURL = document.getElementById('da-url');\nvar saveDAURLBtn = document.getElementById('save-da-url-btn');\nvar clearDAURLBtn = document.getElementById('clear-da-url-btn');\nvar tokenCookie = getCookie('token');\n\ndaURL.onclick = function () {\n  ripplet(arguments[0]);\n  textSelect(this);\n};\n\ndaURL.value = tokenCookie ? tokenCookie : '';\n\nsaveDAURLBtn.onclick = function () {\n  ripplet(arguments[0]);\n  var token = daURL.value;\n  setCookie('token', token, {\n    'expires': year\n  });\n  var notificationArea = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  notification.className = 'notification';\n  notification.innerHTML = \"<p title=\\\"\\u0422\\u043E\\u043A\\u0435\\u043D \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\\">\\u0422\\u043E\\u043A\\u0435\\u043D \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D</p>\";\n  notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n  notificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n      location.reload();\n    }, 300);\n  }, 800);\n};\n\nclearDAURLBtn.onclick = function () {\n  ripplet(arguments[0]);\n  daURL.value = '';\n  setCookie('token', '', {\n    'expires': year\n  });\n  var notificationArea = document.getElementById('notifications-area');\n  var notification = document.createElement('div');\n  notification.className = 'notification';\n  notification.innerHTML = \"<p title=\\\"\\u0422\\u043E\\u043A\\u0435\\u043D \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\\">\\u0422\\u043E\\u043A\\u0435\\u043D \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D</p>\";\n  notificationArea.insertBefore(notification, notificationArea.firstElementChild);\n  notificationSound();\n  setTimeout(function () {\n    notification.classList.add('hidden');\n    setTimeout(function () {\n      notification.remove();\n      location.reload();\n    }, 300);\n  }, 800);\n}; // Close modal on keydown\n\n\ndocument.onkeydown = function (e) {\n  var modalOverlay = document.getElementById('modal-overlay');\n\n  if (!modalOverlay.classList.contains('closed') && e.key === 'Escape') {\n    modalOverlay.click();\n  }\n}; // Change title on cost\n\n\nfunction changeTitle(costInput) {\n  var cost = costInput.value ? \": \".concat(costInput.value, \" \\u20BD\") : '';\n  costInput.setAttribute('title', \"\\u0421\\u0443\\u043C\\u043C\\u0430\".concat(cost));\n} // Reset button\n\n\nvar resetButton = document.getElementById('reset-icon');\n\nresetButton.onclick = function () {\n  ripplet(arguments[0]);\n  var candidatesArea = document.getElementById('candidates-area');\n\n  while (candidatesArea.children.length > 3) {\n    candidatesArea.removeChild(candidatesArea.children[candidatesArea.children.length - 2]);\n  }\n\n  clearRow();\n};\n\nvar urlsBtns = document.getElementsByClassName('special-url');\n\nfor (var i = 0; i < urlsBtns.length; i++) {\n  urlsBtns[i].onclick = function () {\n    ripplet(arguments[0]);\n  };\n} //Summary cost\n\n\nfunction checksum(costElement) {\n  var calculated = costElement.value.replace(/[^\\d+*/,.-]/g, '');\n  calculated = calculated.replace(/,/, '.');\n\n  try {\n    calculated = eval(calculated);\n\n    if (isNaN(calculated) || !isFinite(calculated)) {\n      costElement.value = '';\n      costElement.setAttribute('title', 'Сумма');\n    } else {\n      calculated = calculated > 0 ? +calculated.toFixed(2) : '';\n      costElement.value = calculated;\n      costElement.setAttribute('title', \"\\u0421\\u0443\\u043C\\u043C\\u0430: \".concat(calculated, \" \\u20BD\"));\n    }\n  } catch (e) {\n    costElement.value = '';\n    costElement.setAttribute('title', 'Сумма');\n  }\n} // Buy\n\n\nvar costBuy = document.getElementsByClassName('cost-buy')[0];\nvar costBuyCookie = getCookie('buyCost');\nvar costBuyClearBtn = document.querySelector('.block-buy .btn');\nvar isBuy = false;\nvar buyWinner;\nvar buyCost;\ncostBuy.value = costBuyCookie ? costBuyCookie : '';\nchangeTitle(costBuy);\n\ncostBuy.onchange = function () {\n  changeTitle(this);\n  checksum(this);\n  setCookie('buyCost', this.value, {\n    'expires': year\n  });\n};\n\ncostBuy.onclick = function () {\n  ripplet(arguments[0]);\n};\n\ncostBuyClearBtn.onclick = function () {\n  ripplet(arguments[0]);\n  costBuy.value = '';\n  setCookie('buyCost', '', {\n    'expires': -1\n  });\n};\n\nfunction checkOnBuy(costElem) {\n  var neededCost = +costBuy.value;\n  var currentCost = +costElem.value;\n  var nameElem = costElem.previousElementSibling;\n  var winnerName = nameElem.value.toTitle().truncate();\n\n  if (neededCost && winnerName && currentCost >= neededCost) {\n    if (!started) {\n      var modal = document.querySelector('#modal');\n      var modalOverlay = document.querySelector('#modal-overlay');\n\n      modalOverlay.onclick = function () {\n        ripplet(arguments[0]);\n        modal.classList.toggle('closed');\n        modalOverlay.classList.toggle('closed');\n        document.title = \"Аукцион β\";\n      };\n\n      modal.children[0].innerText = \"\\\"\".concat(winnerName, \"\\\" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438, \\u0430\\u0436 \\u0437\\u0430 \").concat(currentCost, \"\\u20BD Pog!\");\n      document.title = winnerName.length > 30 ? \"\".concat(winnerName.substring(0, 30), \"...\\\" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\") : \"\".concat(winnerName, \" \\u0432\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438!\");\n      modal.classList.toggle('closed');\n      modalOverlay.classList.toggle('closed');\n      notificationSound();\n      sendNotification(\"Аукцион окончен!\", {\n        'body': \"\\u0412\\u044B\\u043A\\u0443\\u043F\\u0438\\u043B\\u0438 \\\"\".concat(winnerName.length > 30 ? \"\".concat(winnerName.substring(0, 30), \"...\") : winnerName, \"\\\"!\"),\n        'dir': 'ltr',\n        'lang': 'ru',\n        'icon': '/static/dist/img/favicon/favicon.png'\n      });\n    } else {\n      buyWinner = winnerName;\n      buyCost = currentCost;\n      isBuy = true;\n      resetBtn.click();\n    }\n  }\n}\n\nfunction focusWindow() {\n  window.focus();\n} //HTML5 notifications\n\n\nfunction sendNotification(title, options) {\n  // Проверим, поддерживает ли браузер HTML5 Notifications\n  if (!('Notification' in window)) {\n    console.log(\"Ваш браузер не поддерживает HTML Notifications, его необходимо обновить.\");\n  } else if (Notification.permission === 'granted') {\n    // Проверим, есть ли права на отправку уведомлений\n    // Если права есть, отправим уведомление\n    var _notification2 = new Notification(title, options);\n\n    _notification2.onclick = focusWindow;\n  } else if (Notification.permission !== 'denied') {\n    // Если прав нет, пытаемся их получить\n    // noinspection JSIgnoredPromiseFromCall\n    Notification.requestPermission(function (permission) {\n      // Если права успешно получены, отправляем уведомление\n      if (permission === 'granted') {\n        var _notification3 = new Notification(title, options);\n\n        _notification3.onclick = focusWindow;\n      } else {\n        // Юзер отклонил наш запрос на показ уведомлений\n        console.log('Вы запретили показывать уведомления');\n      }\n    });\n  } else {// Пользователь ранее отклонил наш запрос на показ уведомлений\n  }\n}\n\nif (Notification.permission === 'default') {\n  // noinspection JSIgnoredPromiseFromCall\n  Notification.requestPermission();\n}\n\n//# sourceURL=webpack://woodsauc/./script.js?");

/***/ })

/******/ });