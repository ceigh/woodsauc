var woodsauc=function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}([function(t,e,n){"use strict";n.d(e,"b",function(){return B}),n.d(e,"a",function(){return i});var B={className:"",color:"rgba(0,0,0,.1)",opacity:null,spreadingDuration:".4s",spreadingDelay:"0s",spreadingTimingFunction:"linear",clearingDuration:"1s",clearingDelay:"0s",clearingTimingFunction:"ease-in-out",centered:!1,appendTo:"body"};function i(t,n){var e=t.currentTarget,i=t.clientX,o=t.clientY;if(e instanceof Element){var a=n?Object.keys(B).reduce(function(t,e){return t[e]=n.hasOwnProperty(e)?n[e]:B[e],t},{}):B,c=e.getBoundingClientRect();if(a.centered&&"false"!==a.centered)i=c.left+.5*c.width,o=c.top+.5*c.height;else if("number"!=typeof i||"number"!=typeof o)return;var r=document.documentElement,s=document.body,l=document.createElement("div"),u=l,d="parent"===a.appendTo,m=getComputedStyle(e),_=l.style;if("fixed"===m.position||"absolute"===m.position&&d)d?e.parentElement.insertBefore(l,e):s.appendChild(l),M(_,m,["position","left","top","right","bottom","marginLeft","marginTop","marginRight","marginBottom"]);else if(d){var p=getComputedStyle(e.parentElement);if("flex"===p.display||"inline-flex"===p.display)e.parentElement.insertBefore(l,e),_.position="absolute",_.left=e.offsetLeft+"px",_.top=e.offsetTop+"px";else{var g=u=e.parentElement.insertBefore(document.createElement("div"),e),h=g.style;h.display="inline-block",h.position="relative",h.width=h.height="0",h.cssFloat=m.cssFloat;var f=g.getBoundingClientRect();g.appendChild(l),_.position="absolute",_.top=c.top-f.top+"px",_.left=c.left-f.left+"px"}}else s.appendChild(l),_.position="absolute",_.left=c.left+r.scrollLeft+s.scrollLeft+"px",_.top=c.top+r.scrollTop+s.scrollTop+"px";_.overflow="hidden",_.pointerEvents="none",_.width=c.width+"px",_.height=c.height+"px",_.zIndex=""+((parseInt(m.zIndex,10)||0)+1),_.opacity=a.opacity,M(_,m,["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","webkitClipPath","clipPath"]);var b=Math.max(i-c.left,c.right-i),E=Math.max(o-c.top,c.bottom-o),v=Math.sqrt(b*b+E*E),y=l.appendChild(document.createElement("div")),k=y.style;return y.className=a.className,k.backgroundColor=a.color,k.width=k.height=2*v+"px",k.marginLeft=i-c.left-v+"px",k.marginTop=o-c.top-v+"px",k.borderRadius="50%",k.transition="transform "+a.spreadingDuration+" "+a.spreadingTimingFunction+" "+a.spreadingDelay+",opacity "+a.clearingDuration+" "+a.clearingTimingFunction+" "+a.clearingDelay,k.transform="scale(0)",y.offsetTop,y.addEventListener("transitionend",function(t){"opacity"===t.propertyName&&u.parentElement&&u.parentElement.removeChild(u)}),k.transform="",k.opacity="0",l}}function M(t,e,n){for(var i=0,o=n;i<o.length;i++){var a=o[i];t[a]=e[a]}}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o});var i=function(t){return t.replace(/(^|\s)\S/g,function(t){return t.toUpperCase()})},o=function(t){return a(t).replace(/\s+/g," ")},a=function(t){return t.replace(/\s+$|^\s+/g,"")}},function(t,e,n){"use strict";function i(){window.focus()}function o(t,e){var n=new Notification(t,e);return n.onclick=i,n}var a={playNotificationSound:function(){var t=new Audio;t.src="/static/sound/light.mp3",t.autoplay=!0},sendNotification:function(e,t){var n=Notification.permission,i=function(t,e){return{title:t,body:e,dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"}}(e,t);"Notification"in window&&("granted"===n?o(e,i):"denied"!==n&&Notification.requestPermission(function(t){"granted"===t&&o(e,i)}))},clear:function(){for(var t=document.getElementById("notifications-area");0<t.children.length;)t.removeChild(t.firstChild)}};e.a=a},function(t,e,n){"use strict";var i=n(0),o=n(2),r=n(1),a=document.getElementById("modal"),c=document.getElementById("modal-overlay");c.addEventListener("click",i.a);function s(t){var e=document.getElementById("timer"),n=l();t?(a.children[0].innerText='"'.concat(buyWinner,'" выкупили, аж за ').concat(buyCost,"₽ Pog!"),document.title=30<buyWinner.length?"".concat(buyWinner.substring(0,30),"... выкупили!"):"".concat(buyWinner," выкупили!"),o.a.sendNotification("Аукцион окончен!",'Выкупили "'.concat(30<buyWinner.length?"".concat(buyWinner.substring(0,30),"..."):buyWinner,'"!'))):(a.children[0].innerText="".concat(n," победил!"),document.title=30<n.length?"".concat(n.substring(0,30),"... победил!"):"".concat(n," победил!"),"Никто не "===n?o.a.sendNotification("Аукцион окончен!","Никто не победил :("):o.a.sendNotification("Аукцион окончен!","Победа ".concat(30<n.length?"".concat(n.substring(0,30),'..."'):n,"!"))),e.classList.remove("danger"),c.classList.toggle("closed"),a.classList.toggle("closed"),o.a.playNotificationSound(),c.onclick=function(){a.classList.toggle("closed"),c.classList.toggle("closed"),document.title="Аукцион β"}}var l=function(){for(var t=document.getElementsByClassName("name"),e=document.getElementsByClassName("cost"),n=void 0,i=null,o=0;o<Math.min(t.length,e.length);++o){var a=t[o].value,c=+e[o].value;i<c&&(i=c,n=a||n)}return i&&(n=Object(r.b)(n)),n?'"'.concat(Object(r.c)(n),'"'):"Никто не "};function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=t.innerHTML.split(":");this.elem=t,this.m=+e[0],this.s=+e[1],this.ms=+e[2],this.time=new Date(6e4*this.m+1e3*this.s+this.ms),this.started=!1,this.timeStart=new Date}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(n,[{key:"start",value:function(){var t=this;this.started||(this.m?(this.timeStart=new Date,this.started=!0,requestAnimationFrame(function(){return t.updateTimer()})):s())}},{key:"reset",value:function(){this.elem.innerHTML="00:00:00",this.m=0,this.time=new Date(0)}},{key:"stop",value:function(){this.elem.innerHTML="00:00:00",this.m=0,this.time=new Date(0),this.started=!1,cancelAnimationFrame(this.updateTimer)}},{key:"minusOne",value:function(){1!==this.m&&(this.m--,this.started?this.timeStart.setMinutes(this.timeStart.getMinutes()-1):(this.m=this.m<0?0:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),timer.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00")))}},{key:"plusOne",value:function(){this.started?59!==this.m&&(this.timeStart.setMinutes(this.timeStart.getMinutes()+1),this.m++):(this.m++,this.m=59<this.m?59:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),timer.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00"))}},{key:"plusTwo",value:function(){this.started?58===this.m?(this.timeStart.setMinutes(this.timeStart.getMinutes()+1),this.m++):this.m<58&&(this.timeStart.setMinutes(this.timeStart.getMinutes()+2),this.m+=2):(this.m+=2,this.m=59<this.m?59:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),timer.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00"))}},{key:"updateTimer",value:function(){var t=this,e=new Date,n=new Date(e-this.timeStart),i=new Date(this.time-n),o=i.getMinutes(),a=i.getSeconds(),c=i.getMilliseconds(),r=l();!o&&a<30&&!this.elem.classList.contains("danger")?this.elem.classList.add("danger"):this.elem.classList.contains("danger")&&(o||30<a)&&this.elem.classList.remove("danger"),"Никто не "!==r?(r=30<r.length?"".concat(r.substr(0,30),'..."'):r,document.title="".concat(r," - Аукцион β")):document.title="Аукцион β",!o&&!a&&c<300||this.time<n?(this.stop(),s()):(o=o<10?"0".concat(o):o,a=a<10?"0".concat(a):a,c=c<10?"0".concat(c):c,c=String(c).substr(0,2),this.elem.innerHTML="".concat(o,":").concat(a,":").concat(c),requestAnimationFrame(function(){return t.updateTimer()}))}}]),n}();e.a=d},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var ripplet_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_timer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_notifications__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_stringUtilities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),firefox=navigator.userAgent.toLowerCase().includes("firefox"),body=document.querySelector("body");firefox&&!getCookie("bg-url")&&(body.style.backgroundImage="url('/static/img/bg/tree.jpg')");var minsCookie=getCookie("previousMinutes"),timerElement=document.getElementById("timer");minsCookie&&(timerElement.innerHTML="".concat(minsCookie,":00:00"));var timer=new _timer__WEBPACK_IMPORTED_MODULE_1__.a(timerElement),timerBtns=Array.from(document.getElementById("timer-btns").children),startBtn=document.getElementById("start-btn"),stopBtn=document.getElementById("stop-btn"),plusBtn=document.getElementById("plus-btn"),plusTwoBtn=document.getElementById("plus-two-btn"),minusBtn=document.getElementById("minus-btn");timerBtns.forEach(function(t){return t.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)}),startBtn.onclick=function(){var t=timerElement.innerHTML.split(":")[0];t&&setCookie("previousMinutes",t,{expires:year}),timer.start()},stopBtn.onclick=function(){timer.started?(timer.timeStart=new Date(new Date-timer.time+300),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.clear(),timer.stop()):timer.reset()},plusBtn.onclick=function(){return timer.plusOne()},plusTwoBtn.onclick=function(){return timer.plusTwo()},minusBtn.onclick=function(){return timer.minusOne()};var defaultSize=16.2,defaultMargin=2.6,highestMargin=35.4,maxSize=defaultSize,maxMargin=defaultMargin,styleForSize=document.createElement("style");function changeSize(t){var e,n,i=t.value.length-10,o=document.getElementsByClassName("name");0<i?(e=+(e=defaultSize+2.1*i).toFixed(2),n=(n=defaultMargin+2.1*i).toFixed(2),n=highestMargin<n?highestMargin:n):1===o.length&&(maxSize=defaultSize,maxMargin=defaultMargin,styleForSize.innerText=".name{width:".concat(defaultSize,"vw}#add-btn{width:").concat(defaultSize+10,"vw}.block-buy span{margin-right:").concat(defaultMargin,"vw}")),e&&maxSize<e&&(maxSize=e,maxMargin=n,styleForSize.innerText=".name{width:".concat(e,"vw}#add-btn{width:").concat(e+10,"vw!important}.block-buy span{margin-right:").concat(n,"vw!important}"))}styleForSize.appendChild(document.createTextNode(".name{width:".concat(defaultSize,"vw}"))),document.head.appendChild(styleForSize);try{var socket=io("https://socket.donationalerts.ru:443",{reconnection:!1}),token=getCookie("token");token&&socket.emit("add-user",{token:token,type:"minor"}),socket.on("donation",function(t){if(timer.started){var u=JSON.parse(t);1!==u.alert_type&&"1"!==u.alert_type||function(){var o=u.message;o=o.replace(/\s+/g," ");for(var a=+u.amount,c=document.getElementsByClassName("name"),r=document.getElementsByClassName("cost"),t=document.getElementById("notifications-area"),e=!1,n=0;n<Math.min(c.length,r.length);n++){var s=c[n].value;if(s&&o.toLowerCase().includes(s.toLowerCase()))if("break"===function(){var i=document.createElement("div");return i.className="notification",i.innerHTML='<p></p>\n                        <button class="notification-btn" type="button" title="Подтвердить">\n                            <img src="/static/img/icons/material/done.svg" alt="Иконка подтверждения">\n                        </button>\n                        <button class="notification-btn" type="button" title="Отклонить">\n                            <img src="/static/img/icons/material/clear.svg" alt="Иконка очистки">\n                        </button>',i.children[0].innerText="Добавить ₽".concat(a,' к "').concat(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.c)(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(s)),'"?'),i.children[0].setAttribute("title","Добавить ₽".concat(a,' к "').concat(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.c)(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(s)),'"?')),i.children[1].onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),r=document.getElementsByClassName("cost"),c=document.getElementsByClassName("name");for(var t=0;t<Math.min(c.length,r.length);t++){var e=c[t].value,n=+r[t].value;e&&o.toLowerCase().includes(e.toLowerCase())&&(r[t].value=a+n,checkOnBuy(r[t]),sortCandidates(),changeTitle(r[t]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300))}},i.children[2].onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},t.insertBefore(i,t.firstElementChild),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound(),e=!0,"break"}())break}if(!e){var i=document.createElement("div");i.className="notification",i.innerHTML='<p></p>\n                    <button class="notification-btn" type="button" title="Подтвердить">\n                        <img src="/static/img/icons/material/done.svg" alt="Иконка подтверждения">\n                    </button>\n                    <button class="notification-btn" type="button" title="Отклонить">\n                        <img src="/static/img/icons/material/clear.svg" alt="Иконка очистки">\n                    </button>',i.children[0].innerText='Создать "'.concat(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.c)(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(o)),'" с ₽').concat(a,"?"),i.children[0].setAttribute("title",'Создать "'.concat(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.c)(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(o)),'" с ₽').concat(a,"?")),i.children[1].onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]);var t=document.createElement("div");t.className="block",t.innerHTML='<label>\n                           <input class="name" type="text" autocomplete="off"\n                           onkeyup="createLink(this);changeSize(this)" onchange="changeSize(this)"\n                           placeholder="Позиция" spellcheck="false" onclick="ripplet(arguments[0])">\n                           <input onclick="ripplet(arguments[0])" class="cost" type="text" min="0" step="10" \n                             onchange="changeTitle(this);checksum(this);sortCandidates()" \n                             placeholder="₽" value="'.concat(a,'" autocomplete="off">\n                         </label>\n                         <span>\n                         <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link"\n                           onclick="ripplet(arguments[0])" title="Ссылка на кинопоиск">\n                           <img src="/static/img/icons/material/video-library.svg" \n                           alt="Иконка ссылки на кинопоиск"></a>\n                         <button type="button" class="btn" \n                         onclick="ripplet(arguments[0]);removeRow(this)" title="Удалить">\n                           <img src="/static/img/icons/material/delete.svg" alt="Иконка удаления">\n                         </button>\n                         </span>'),t.children[0].children[0].value=o,t.children[0].children[0].setAttribute("title",o),t.children[0].children[1].setAttribute("title","Сумма: ".concat(a," ₽")),changeSize(t.children[0].children[0]),checkOnBuy(t.children[0].children[1]),candidatesArea.insertBefore(t,candidatesArea.lastElementChild),sortCandidates(),setTimeout(function(){t.classList.add("visible")},20);for(var e=0;e<c.length;e++)createLink(c[e]);i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},i.children[2].onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},t.insertBefore(i,t.firstElementChild),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound()}var l=o.replace(/\s+$/,"");l=30<l.length?"".concat(l.substr(0,30),"..."):l,sendNotification("Новое пожертвование".concat(u.username?" от ".concat(u.username):"","!"),{body:'"'.concat(l,'" с ').concat(a,"₽"),dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"})}()}})}catch(t){console.log("Нет подключения, автодобавление не будет работать.")}function sortCandidates(){for(var t=[],e=document.getElementsByClassName("name"),n=document.getElementsByClassName("cost"),i=0;i<Math.min(e.length,n.length);i++){var o=e[i].value,a=+n[i].value,c=e[i].getAttribute("title"),r=n[i].getAttribute("title"),s=e[i].parentNode.parentNode.children[1].children[0].href;t.push({name:o,cost:a,titleName:c,titleCost:r,link:s})}t=t.sort(function(t,e){return t.cost-e.cost}).reverse();for(var l=0;l<Math.min(e.length,n.length);l++){var u=t[l].cost;n[l].value=0===u?"":u,e[l].value=t[l].name,e[l].setAttribute("title",t[l].titleName),n[l].setAttribute("title",t[l].titleCost),e[l].parentNode.parentNode.children[1].children[0].href=t[l].link}}function clearRow(){var t=document.getElementById("candidates-area"),e=t.children[1].children[0],n=t.children[1].children[1].children[0];e.children[0].value="",e.children[1].value="",e.children[0].setAttribute("title","Фильм, игра, etc"),e.children[1].setAttribute("title","Сумма"),n.href="https://www.kinopoisk.ru",changeSize(e.children[0])}function removeRow(e){setTimeout(function(){try{e.parentNode.parentNode.parentNode.removeChild(e.parentNode.parentNode)}catch(t){}var t=document.getElementsByClassName("name");1!==t.length||t[0].value||(maxSize=defaultSize,styleForSize.innerText=".name{width:".concat(defaultSize,"vw}#add-btn{width:").concat(defaultSize+10,"vw}"))},200)}function createLink(t){t.value=Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.a)(t.value);var e=t.value;e?(t.parentNode.parentNode.children[1].children[0].href=encodeURI("https://www.kinopoisk.ru/s/type/all/find/".concat(e,"/")),t.setAttribute("title",Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(e))):(t.parentNode.parentNode.children[1].children[0].href="https://www.kinopoisk.ru",t.setAttribute("title","Фильм, игра, etc"))}var addBtn=document.getElementById("add-btn"),candidatesArea=document.getElementById("candidates-area");function setCookie(t,e,n){var i=(n=n||{}).expires;if("number"==typeof i&&i){var o=new Date;o.setTime(o.getTime()+1e3*i),i=n.expires=o}i&&i.toUTCString&&(n.expires=i.toUTCString()),e=encodeURIComponent(e);var a="".concat(t,"=").concat(e);for(var c in n){a+="; "+c;var r=n[c];!0!==r&&(a+="="+r)}document.cookie=a}function changeBG(t){var e=new Image;t&&""!==t?(e.onload=function(){body.style.backgroundImage="url(".concat(e.src,")")},e.src=t):body.style.backgroundImage=firefox?"url('/static/img/bg/tree.jpg')":"url('/static/img/bg/tree.webp')"}function sheet(t){var e=document.createElement("style");return e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function textSelect(t){t.focus(),t.select()}addBtn.onclick=function(){var t=document.createElement("div");t.className="block",t.innerHTML='<label>\n           <input class="name" type="text" onkeyup="createLink(this);changeSize(this)"  onchange="changeSize(this)"\n             onclick="ripplet(arguments[0])" title="Фильм, игра, etc" autocomplete="off" placeholder="Позиция" spellcheck="false">\n           <input class="cost" type="text" min="0" step="10" placeholder="₽" title="Сумма"\n             onclick="ripplet(arguments[0])" onchange="changeTitle(this);checksum(this);sortCandidates();checkOnBuy(this)" autocomplete="off">\n         </label>\n         <span>\n         <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link" \n           onclick="ripplet(arguments[0])" title="Ссылка на кинопоиск">\n           <img src="static/img/icons/material/video-library.svg" alt="Иконка ссылки на кинопоиск"></a>\n         <button type="button" class="btn" \n           onclick="ripplet(arguments[0]);removeRow(this)" title="Удалить">\n           <img src="/static/img/icons/material/delete.svg" alt="Иконка удаления">\n         </button>\n        </span>',candidatesArea.insertBefore(t,candidatesArea.lastElementChild),Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),setTimeout(function(){t.classList.add("visible")},10),t.children[0].children[0].focus(),sortCandidates()};var showSettingsBtn=document.getElementById("settings-icon"),settingsWindow=document.getElementById("settings"),saveBGURLBtn=document.getElementById("save-bg-url-btn"),clearBGURLBtn=document.getElementById("clear-bg-url-btn"),bgURLInput=document.getElementById("bg-url"),colorExctractor=document.getElementById("color-extractor"),year=31622400,bgURL=getCookie("bg-url"),styleElement;function hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}bgURLInput.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),textSelect(this)},showSettingsBtn.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),settingsWindow.classList.toggle("closed")};var colorCookie=getCookie("accent"),color;if(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.b.clearingDuration=".3s",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.b.spreadingDuration=".3s",colorCookie){var rgb=hexToRgb(colorCookie);color="rgba(".concat(rgb.r,", ").concat(rgb.g,", ").concat(rgb.b,", .6)")}else color="rgba(243, 151, 39, .6)";if(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.b.color=color,colorCookie&&""!==colorCookie){var accentShadow=hexToRgb(colorCookie);accentShadow="rgba(".concat(accentShadow.r,", ").concat(accentShadow.g,", ").concat(accentShadow.b,", 0.7)"),styleElement=sheet(".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:".concat(colorCookie,"!important}\ninput:focus{--accent:").concat(colorCookie,"!important;--shadow:").concat(accentShadow,"!important}\n::selection{background:").concat(accentShadow,"!important}::-moz-selection{background:").concat(accentShadow,"}!important"))}else styleElement=sheet(".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\ninput:focus{--accent:#f39727!important;--shadow:rgba(243, 151, 39, 0.7)!important}\n::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}");function isUrlWork(t){var e=new XMLHttpRequest;try{return e.open("HEAD",t,!1),e.send(),200===e.status}catch(t){return console.log(t),!1}}function isUrlValid(t){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&/=]*)/i.test(t)}function notification(t){var e=document.getElementById("notifications-area"),n=document.createElement("div"),i=document.createElement("p");i.innerText=t,i.setAttribute("title",t),n.appendChild(i),n.className="notification",e.insertBefore(n,e.firstElementChild),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound(),setTimeout(function(){n.classList.add("hidden"),setTimeout(function(){n.remove()},300)},1200)}saveBGURLBtn.onclick=function(){var n=bgURLInput.value;Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),n?n===getCookie("bg-url")?notification("Этот фон уже установлен"):isUrlValid(n)?isUrlWork("https://cors-anywhere.herokuapp.com/".concat(n))?(changeBG(n),notification("Фон обновлен"),colorExctractor.setAttribute("src","https://cors-anywhere.herokuapp.com/".concat(n)),colorExctractor.addEventListener("load",function(){var t=new Vibrant(this).swatches().Vibrant.getHex(),e=hexToRgb(t);ripplet_js__WEBPACK_IMPORTED_MODULE_0__.b.color="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", .6)"),e="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", .7)"),styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:".concat(t,"!important}\n                            input:focus{--accent:").concat(t,"!important;--shadow:").concat(e,"!important}\n                            ::selection{background:").concat(e,"!important}::-moz-selection{background:").concat(e,"!important}"),setCookie("bg-url",n,{expires:year}),setCookie("accent",t,{expires:year})})):notification("URL неверный, или не отвечает"):notification("Введите корректный URL"):notification("Нет URL фона")},clearBGURLBtn.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),bgURLInput.value?(changeBG(""),bgURLInput.value="",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.b.color="rgba(243, 151, 39, .6)",styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\n            input:focus{--accent:#f39727!important;--shadow:rgba(243,151,39,.7)!important});\n            ::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}",setCookie("bg-url","",{expires:year}),setCookie("accent","",{expires:year}),notification("Фон сброшен")):notification("Фон уже сброшен")},changeBG(bgURL),bgURLInput.value=bgURL||"";var daURL=document.getElementById("da-url"),saveDAURLBtn=document.getElementById("save-da-url-btn"),clearDAURLBtn=document.getElementById("clear-da-url-btn"),tokenCookie=getCookie("token");function changeTitle(t){var e=t.value?": ".concat(t.value," ₽"):"";t.setAttribute("title","Сумма".concat(e))}daURL.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),textSelect(this)},daURL.value=tokenCookie||"",saveDAURLBtn.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),setCookie("token",daURL.value,{expires:year});var t=document.getElementById("notifications-area"),e=document.createElement("div");e.className="notification",e.innerHTML='<p title="Токен сохранен">Токен сохранен</p>',t.insertBefore(e,t.firstElementChild),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound(),setTimeout(function(){e.classList.add("hidden"),setTimeout(function(){e.remove(),location.reload()},300)},800)},clearDAURLBtn.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),setCookie("token",daURL.value="",{expires:year});var t=document.getElementById("notifications-area"),e=document.createElement("div");e.className="notification",e.innerHTML='<p title="Токен удален">Токен удален</p>',t.insertBefore(e,t.firstElementChild),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound(),setTimeout(function(){e.classList.add("hidden"),setTimeout(function(){e.remove(),location.reload()},300)},800)},document.onkeydown=function(t){var e=document.getElementById("modal-overlay");e.classList.contains("closed")||"Escape"!==t.key||e.click()};var resetButton=document.getElementById("reset-icon");resetButton.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]);for(var t=document.getElementById("candidates-area");3<t.children.length;)t.removeChild(t.children[t.children.length-2]);clearRow()};for(var urlsBtns=document.getElementsByClassName("special-url"),i=0;i<urlsBtns.length;i++)urlsBtns[i].onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0])};function checksum(costElement){var calculated=costElement.value.replace(/[^\d+*/,.-]/g,"");calculated=calculated.replace(/,/,".");try{calculated=eval(calculated),isNaN(calculated)||!isFinite(calculated)?(costElement.value="",costElement.setAttribute("title","Сумма")):(calculated=0<calculated?+calculated.toFixed(2):"",costElement.value=calculated,costElement.setAttribute("title","Сумма: ".concat(calculated," ₽")))}catch(t){costElement.value="",costElement.setAttribute("title","Сумма")}}var costBuy=document.getElementsByClassName("cost-buy")[0],costBuyCookie=getCookie("buyCost"),costBuyClearBtn=document.querySelector(".block-buy .btn"),isBuy=!1,buyWinner,buyCost;function checkOnBuy(t){var e=+costBuy.value,n=+t.value,i=t.previousElementSibling,o=Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.c)(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_3__.b)(i.value));if(e&&o&&e<=n)if(timer.started)buyWinner=o,buyCost=n,isBuy=!0,stopBtn.click();else{var a=document.querySelector("#modal"),c=document.querySelector("#modal-overlay");c.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),a.classList.toggle("closed"),c.classList.toggle("closed"),document.title="Аукцион β"},a.children[0].innerText='"'.concat(o,'" выкупили, аж за ').concat(n,"₽ Pog!"),document.title=30<o.length?"".concat(o.substring(0,30),'..." выкупили!'):"".concat(o," выкупили!"),a.classList.toggle("closed"),c.classList.toggle("closed"),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.playNotificationSound(),_notifications__WEBPACK_IMPORTED_MODULE_2__.a.sendNotification("Аукцион окончен!",{body:'Выкупили "'.concat(30<o.length?"".concat(o.substring(0,30),"..."):o,'"!'),dir:"ltr",lang:"ru",icon:"/static/dist/img/favicon/favicon.png"})}}costBuy.value=costBuyCookie||"",changeTitle(costBuy),costBuy.onchange=function(){changeTitle(this),checksum(this),setCookie("buyCost",this.value,{expires:year})},costBuy.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0])},costBuyClearBtn.onclick=function(){Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0]),setCookie("buyCost",costBuy.value="",{expires:-1})},"default"===Notification.permission&&Notification.requestPermission()}]);