var script=function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(module,exports){var firefox=navigator.userAgent.toLowerCase().includes("firefox");function notificationSound(){var t=new Audio;t.src="/static/sound/light.mp3",t.autoplay=!0}firefox&&!getCookie("bg-url")&&(document.querySelector("body").style.backgroundImage="url('/static/img/bg/tree.jpg')");var defaultSize=16.2,defaultMargin=2.6,highestMargin=35.4,maxSize=defaultSize,maxMargin=defaultMargin,styleForSize=document.createElement("style");function changeSize(t){var e,n,i=t.value.length-10,o=document.getElementsByClassName("name");0<i?(e=+(e=defaultSize+2.1*i).toFixed(2),n=(n=defaultMargin+2.1*i).toFixed(2),n=highestMargin<n?highestMargin:n):1===o.length&&(maxSize=defaultSize,maxMargin=defaultMargin,styleForSize.innerText=".name{width:".concat(defaultSize,"vw}#add-btn{width:").concat(defaultSize+10,"vw}.block-buy span{margin-right:").concat(defaultMargin,"vw}")),e&&maxSize<e&&(maxSize=e,maxMargin=n,styleForSize.innerText=".name{width:".concat(e,"vw}#add-btn{width:").concat(e+10,"vw!important}.block-buy span{margin-right:").concat(n,"vw!important}"))}styleForSize.appendChild(document.createTextNode(".name{width:".concat(defaultSize,"vw}"))),document.head.appendChild(styleForSize),String.prototype.toTitle=function(){return this.replace(/(^|\s)\S/g,function(t){return t.toUpperCase()})},String.prototype.truncate=function(){return this.replace(/\s+$/,"").replace(/^\s+/,"")};var started=!1,startTime;try{var socket=io("https://socket.donationalerts.ru:443",{reconnection:!1}),token=getCookie("token");token&&socket.emit("add-user",{token:token,type:"minor"}),socket.on("donation",function(t){if(started){var u=JSON.parse(t);1!==u.alert_type&&"1"!==u.alert_type||function(){var o=u.message;o=o.replace(/\s+/g," ");for(var a=+u.amount,c=document.getElementsByClassName("name"),r=document.getElementsByClassName("cost"),t=document.getElementById("notifications-area"),e=!1,n=0;n<Math.min(c.length,r.length);n++){var l=c[n].value;if(l&&o.toLowerCase().includes(l.toLowerCase()))if("break"===function(){var i=document.createElement("div");return i.className="notification",i.innerHTML='<p></p>\n                        <button class="notification-btn" type="button" title="Подтвердить">\n                            <img src="/static/img/icons/material/done.svg" alt="Иконка подтверждения">\n                        </button>\n                        <button class="notification-btn" type="button" title="Отклонить">\n                            <img src="/static/img/icons/material/clear.svg" alt="Иконка очистки">\n                        </button>',i.children[0].innerText="Добавить ₽".concat(a,' к "').concat(l.toTitle().replace(/\s+$/,""),'"?'),i.children[0].setAttribute("title","Добавить ₽".concat(a,' к "').concat(l.toTitle().replace(/\s+$/,""),'"?')),i.children[1].onclick=function(){ripplet(arguments[0]),r=document.getElementsByClassName("cost"),c=document.getElementsByClassName("name");for(var t=0;t<Math.min(c.length,r.length);t++){var e=c[t].value,n=+r[t].value;e&&o.toLowerCase().includes(e.toLowerCase())&&(r[t].value=a+n,checkOnBuy(r[t]),sortCandidates(),changeTitle(r[t]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300))}},i.children[2].onclick=function(){ripplet(arguments[0]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},t.insertBefore(i,t.firstElementChild),notificationSound(),e=!0,"break"}())break}if(!e){var i=document.createElement("div");i.className="notification",i.innerHTML='<p></p>\n                    <button class="notification-btn" type="button" title="Подтвердить">\n                        <img src="/static/img/icons/material/done.svg" alt="Иконка подтверждения">\n                    </button>\n                    <button class="notification-btn" type="button" title="Отклонить">\n                        <img src="/static/img/icons/material/clear.svg" alt="Иконка очистки">\n                    </button>',i.children[0].innerText='Создать "'.concat(o.toTitle().replace(/\s+$/,""),'" с ₽').concat(a,"?"),i.children[0].setAttribute("title",'Создать "'.concat(o.toTitle().replace(/\s+$/,""),'" с ₽').concat(a,"?")),i.children[1].onclick=function(){ripplet(arguments[0]);var t=document.createElement("div");t.className="block",t.innerHTML='<label>\n                           <input class="name" type="text" autocomplete="off"\n                           onkeyup="createLink(this);changeSize(this)" onchange="changeSize(this)"\n                           placeholder="Позиция" spellcheck="false" onclick="ripplet(arguments[0])">\n                           <input onclick="ripplet(arguments[0])" class="cost" type="text" min="0" step="10" \n                             onchange="changeTitle(this);checksum(this);sortCandidates()" \n                             placeholder="₽" value="'.concat(a,'" autocomplete="off">\n                         </label>\n                         <span>\n                         <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link"\n                           onclick="ripplet(arguments[0])" title="Ссылка на кинопоиск">\n                           <img src="/static/img/icons/material/video-library.svg" \n                           alt="Иконка ссылки на кинопоиск"></a>\n                         <button type="button" class="btn" \n                         onclick="ripplet(arguments[0]);removeRow(this)" title="Удалить">\n                           <img src="/static/img/icons/material/delete.svg" alt="Иконка удаления">\n                         </button>\n                         </span>'),t.children[0].children[0].value=o,t.children[0].children[0].setAttribute("title",o),t.children[0].children[1].setAttribute("title","Сумма: ".concat(a," ₽")),changeSize(t.children[0].children[0]),checkOnBuy(t.children[0].children[1]),candidatesArea.insertBefore(t,candidatesArea.lastElementChild),sortCandidates(),setTimeout(function(){t.classList.add("visible")},20);for(var e=0;e<c.length;e++)createLink(c[e]);i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},i.children[2].onclick=function(){ripplet(arguments[0]),i.classList.add("hidden"),setTimeout(function(){i.remove()},300)},t.insertBefore(i,t.firstElementChild),notificationSound()}var s=o.replace(/\s+$/,"");s=30<s.length?"".concat(s.substr(0,30),"..."):s,sendNotification("Новое пожертвование".concat(u.username?" от ".concat(u.username):"","!"),{body:'"'.concat(s,'" с ').concat(a,"₽"),dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"})}()}})}catch(t){console.log("Нет подключения, автодобавление не будет работать.")}function returnWinner(){for(var t=void 0,e=null,n=document.getElementsByClassName("name"),i=document.getElementsByClassName("cost"),o=0;o<Math.min(n.length,i.length);o++){var a=n[o].value,c=+i[o].value;e<c&&(e=c,t=a||t)}return e&&(t=t.toTitle()),t?'"'.concat(t.truncate(),'"'):"Никто не "}function showWinner(){var t=document.querySelector("#modal"),e=document.querySelector("#modal-overlay");timer.classList.remove("danger"),e.onclick=function(){ripplet(arguments[0]),t.classList.toggle("closed"),e.classList.toggle("closed"),document.title="Аукцион β"};var n=returnWinner();isBuy?(t.children[0].innerText='"'.concat(buyWinner,'" выкупили, аж за ').concat(buyCost,"₽ Pog!"),document.title=30<buyWinner.length?"".concat(buyWinner.substring(0,30),"... выкупили!"):"".concat(buyWinner," выкупили!"),sendNotification("Аукцион окончен!",{body:'Выкупили "'.concat(30<buyWinner.length?"".concat(buyWinner.substring(0,30),"..."):buyWinner,'"!'),dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"})):(t.children[0].innerText="".concat(n," победил!"),document.title=30<n.length?"".concat(n.substring(0,30),"... победил!"):"".concat(n," победил!"),sendNotification("Аукцион окончен!","Никто не "===n?{body:"Никто не победил :(",dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"}:{body:"Победа ".concat(30<n.length?"".concat(n.substring(0,30),'..."'):n,"!"),dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"})),e.classList.toggle("closed"),t.classList.toggle("closed"),notificationSound()}var timer=document.getElementById("timer"),minsCookie=getCookie("previousMinutes");minsCookie&&(timer.innerHTML="".concat(minsCookie,":00:00"));var timerArray=timer.innerHTML.split(":"),m=+timerArray[0],s=+timerArray[1],ms=+timerArray[2],timerTime=new Date(6e4*m+1e3*s+ms);function updateTimer(){var t=new Date,e=new Date(t-startTime),n=new Date(timerTime-e),i=n.getMinutes(),o=n.getSeconds(),a=n.getMilliseconds();!i&&o<30?timer.classList.add("danger"):timer.classList.remove("danger");var c=returnWinner();"Никто не "!==c?(c=30<c.length?"".concat(c.substr(0,30),'..."'):c,document.title="".concat(c," - Аукцион β")):document.title="Аукцион β",!i&&!o&&a<300||timerTime<e?(cancelAnimationFrame(updateTimer),timer.innerHTML="00:00:00",showWinner(),started=!1):(i=i<10?"0".concat(i):i,o=o<10?"0".concat(o):o,a=a<10?"0".concat(a):a,a=String(a).substr(0,2),timer.innerHTML="".concat(i,":").concat(o,":").concat(a),requestAnimationFrame(updateTimer))}function startTimer(){var t=+timer.innerHTML.split(":")[0];started||(t?(startTime=new Date,requestAnimationFrame(updateTimer),started=!0):showWinner())}var startBtn=document.getElementById("start-btn"),resetBtn=document.getElementById("stop-btn"),plusBtn=document.getElementById("plus-btn"),plusTwoBtn=document.getElementById("plus-two-btn"),minusBtn=document.getElementById("minus-btn");function sortCandidates(){for(var t=[],e=document.getElementsByClassName("name"),n=document.getElementsByClassName("cost"),i=0;i<Math.min(e.length,n.length);i++){var o=e[i].value,a=+n[i].value,c=e[i].getAttribute("title"),r=n[i].getAttribute("title"),l=e[i].parentNode.parentNode.children[1].children[0].href;t.push({name:o,cost:a,titleName:c,titleCost:r,link:l})}t=t.sort(function(t,e){return t.cost-e.cost}).reverse();for(var s=0;s<Math.min(e.length,n.length);s++){var u=t[s].cost;n[s].value=0===u?"":u,e[s].value=t[s].name,e[s].setAttribute("title",t[s].titleName),n[s].setAttribute("title",t[s].titleCost),e[s].parentNode.parentNode.children[1].children[0].href=t[s].link}}function clearRow(){var t=document.getElementById("candidates-area"),e=t.children[1].children[0],n=t.children[1].children[1].children[0];e.children[0].value="",e.children[1].value="",e.children[0].setAttribute("title","Фильм, игра, etc"),e.children[1].setAttribute("title","Сумма"),n.href="https://www.kinopoisk.ru",changeSize(e.children[0])}function removeRow(e){setTimeout(function(){try{e.parentNode.parentNode.parentNode.removeChild(e.parentNode.parentNode)}catch(t){}var t=document.getElementsByClassName("name");1!==t.length||t[0].value||(maxSize=defaultSize,styleForSize.innerText=".name{width:".concat(defaultSize,"vw}#add-btn{width:").concat(defaultSize+10,"vw}"))},200)}function trim(t){return t.replace(/^\s+/,"").replace(/\s{2,}$/,"").replace(/\s+/g," ")}function createLink(t){t.value=trim(t.value);var e=t.value;e?(t.parentNode.parentNode.children[1].children[0].href=encodeURI("https://www.kinopoisk.ru/s/type/all/find/".concat(e,"/")),t.setAttribute("title",e.toTitle())):(t.parentNode.parentNode.children[1].children[0].href="https://www.kinopoisk.ru",t.setAttribute("title","Фильм, игра, etc"))}startBtn.onclick=function(){var t=timer.innerHTML.split(":")[0];ripplet(arguments[0]),t&&setCookie("previousMinutes",t,{expires:year}),startTimer()},resetBtn.onclick=function(){if(ripplet(arguments[0]),started){startTime=new Date(new Date-timerTime+300);for(var t=document.getElementById("notifications-area");0<t.children.length;)t.removeChild(t.firstChild);started=!1}else m=0,timerTime=new Date(0),timer.innerHTML="00:00:00"},plusBtn.onclick=function(){ripplet(arguments[0]);var t,e=+(timerArray=timer.innerHTML.split(":"))[0];started?59!=e&&startTime.setMinutes(startTime.getMinutes()+1):(m=59<(m=+timerArray[0]+1)?59:m,timerTime=new Date(6e4*m+1e3*s+ms),t=m<10?"0".concat(m):m,timer.innerHTML="".concat(t,":00:00"))},plusTwoBtn.onclick=function(){ripplet(arguments[0]);var t,e=+(timerArray=timer.innerHTML.split(":"))[0];started?58==e?startTime.setMinutes(startTime.getMinutes()+1):e<58&&startTime.setMinutes(startTime.getMinutes()+2):(m=59<(m=+timerArray[0]+2)?59:m,timerTime=new Date(6e4*m+1e3*s+ms),t=m<10?"0".concat(m):m,timer.innerHTML="".concat(t,":00:00"))},minusBtn.onclick=function(){var t,e=+timer.innerHTML.split(":")[0];ripplet(arguments[0]),e&&(started?startTime.setMinutes(startTime.getMinutes()-1):(timerArray=timer.innerHTML.split(":"),m=+timerArray[0]-1,timerTime=new Date(6e4*m+1e3*s+ms),t=m<10?"0".concat(m):m,timer.innerHTML="".concat(t,":00:00")))};var addBtn=document.getElementById("add-btn"),candidatesArea=document.getElementById("candidates-area");function setCookie(t,e,n){var i=(n=n||{}).expires;if("number"==typeof i&&i){var o=new Date;o.setTime(o.getTime()+1e3*i),i=n.expires=o}i&&i.toUTCString&&(n.expires=i.toUTCString()),e=encodeURIComponent(e);var a="".concat(t,"=").concat(e);for(var c in n){a+="; "+c;var r=n[c];!0!==r&&(a+="="+r)}document.cookie=a}function changeBG(t){var e=document.querySelector("body"),n=new Image;t&&""!==t?(n.onload=function(){e.style.backgroundImage="url(".concat(n.src,")")},n.src=t):e.style.backgroundImage=firefox?"url('/static/img/bg/tree.jpg')":"url('/static/img/bg/tree.webp')"}function sheet(t){var e=document.createElement("style");return e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function textSelect(t){t.focus(),t.select()}addBtn.onclick=function(){var t=document.createElement("div");t.className="block",t.innerHTML='<label>\n           <input class="name" type="text" onkeyup="createLink(this);changeSize(this)"  onchange="changeSize(this)"\n             onclick="ripplet(arguments[0])" title="Фильм, игра, etc" autocomplete="off" placeholder="Позиция" spellcheck="false">\n           <input class="cost" type="text" min="0" step="10" placeholder="₽" title="Сумма"\n             onclick="ripplet(arguments[0])" onchange="changeTitle(this);checksum(this);sortCandidates();checkOnBuy(this)" autocomplete="off">\n         </label>\n         <span>\n         <a href="https://www.kinopoisk.ru" target="_blank" class="kp-link" \n           onclick="ripplet(arguments[0])" title="Ссылка на кинопоиск">\n           <img src="static/img/icons/material/video-library.svg" alt="Иконка ссылки на кинопоиск"></a>\n         <button type="button" class="btn" \n           onclick="ripplet(arguments[0]);removeRow(this)" title="Удалить">\n           <img src="/static/img/icons/material/delete.svg" alt="Иконка удаления">\n         </button>\n        </span>',candidatesArea.insertBefore(t,candidatesArea.lastElementChild),ripplet(arguments[0]),setTimeout(function(){t.classList.add("visible")},10),t.children[0].children[0].focus(),sortCandidates()};var showSettingsBtn=document.getElementById("settings-icon"),settingsWindow=document.getElementById("settings"),saveBGURLBtn=document.getElementById("save-bg-url-btn"),clearBGURLBtn=document.getElementById("clear-bg-url-btn"),bgURLInput=document.getElementById("bg-url"),colorExctractor=document.getElementById("color-extractor"),year=31622400,bgURL=getCookie("bg-url"),styleElement;function hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}bgURLInput.onclick=function(){ripplet(arguments[0]),textSelect(this)},showSettingsBtn.onclick=function(){ripplet(arguments[0]),settingsWindow.classList.toggle("closed")};var colorCookie=getCookie("accent"),color;if(ripplet.defaultOptions.clearingDuration=".3s",ripplet.defaultOptions.spreadingDuration=".3s",colorCookie){var rgb=hexToRgb(colorCookie);color="rgba(".concat(rgb.r,", ").concat(rgb.g,", ").concat(rgb.b,", .6)")}else color="rgba(243, 151, 39, .6)";if(ripplet.defaultOptions.color=color,colorCookie&&""!==colorCookie){var accentShadow=hexToRgb(colorCookie);accentShadow="rgba(".concat(accentShadow.r,", ").concat(accentShadow.g,", ").concat(accentShadow.b,", 0.7)"),styleElement=sheet(".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:".concat(colorCookie,"!important}\ninput:focus{--accent:").concat(colorCookie,"!important;--shadow:").concat(accentShadow,"!important}\n::selection{background:").concat(accentShadow,"!important}::-moz-selection{background:").concat(accentShadow,"}!important"))}else styleElement=sheet(".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\ninput:focus{--accent:#f39727!important;--shadow:rgba(243, 151, 39, 0.7)!important}\n::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}");function isUrlWork(t){var e=new XMLHttpRequest;try{return e.open("HEAD",t,!1),e.send(),200===e.status}catch(t){return console.log(t),!1}}function isUrlValid(t){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&/=]*)/i.test(t)}function notification(t){var e=document.getElementById("notifications-area"),n=document.createElement("div"),i=document.createElement("p");i.innerText=t,i.setAttribute("title",t),n.appendChild(i),n.className="notification",e.insertBefore(n,e.firstElementChild),notificationSound(),setTimeout(function(){n.classList.add("hidden"),setTimeout(function(){n.remove()},300)},1200)}saveBGURLBtn.onclick=function(){var n=bgURLInput.value;ripplet(arguments[0]),n?n===getCookie("bg-url")?notification("Этот фон уже установлен"):isUrlValid(n)?isUrlWork("https://cors-anywhere.herokuapp.com/".concat(n))?(changeBG(n),notification("Фон обновлен"),colorExctractor.setAttribute("src","https://cors-anywhere.herokuapp.com/".concat(n)),colorExctractor.addEventListener("load",function(){var t=new Vibrant(this).swatches().Vibrant.getHex(),e=hexToRgb(t);ripplet.defaultOptions.color="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", .6)"),e="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", .7)"),styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:".concat(t,"!important}\n                            input:focus{--accent:").concat(t,"!important;--shadow:").concat(e,"!important}\n                            ::selection{background:").concat(e,"!important}::-moz-selection{background:").concat(e,"!important}"),setCookie("bg-url",n,{expires:year}),setCookie("accent",t,{expires:year})})):notification("URL неверный, или не отвечает"):notification("Введите корректный URL"):notification("Нет URL фона")},clearBGURLBtn.onclick=function(){ripplet(arguments[0]),bgURLInput.value?(changeBG(""),bgURLInput.value="",ripplet.defaultOptions.color="rgba(243, 151, 39, .6)",styleElement.innerText=".name,.cost,#bg-url,.danger,#da-url,.cost-buy{color:#f39727!important}\n            input:focus{--accent:#f39727!important;--shadow:rgba(243,151,39,.7)!important});\n            ::selection{background:rgba(243,151,39,.7)}::-moz-selection{background:rgba(243,151,39,.7)}",setCookie("bg-url","",{expires:year}),setCookie("accent","",{expires:year}),notification("Фон сброшен")):notification("Фон уже сброшен")},changeBG(bgURL),bgURLInput.value=bgURL||"";var daURL=document.getElementById("da-url"),saveDAURLBtn=document.getElementById("save-da-url-btn"),clearDAURLBtn=document.getElementById("clear-da-url-btn"),tokenCookie=getCookie("token");function changeTitle(t){var e=t.value?": ".concat(t.value," ₽"):"";t.setAttribute("title","Сумма".concat(e))}daURL.onclick=function(){ripplet(arguments[0]),textSelect(this)},daURL.value=tokenCookie||"",saveDAURLBtn.onclick=function(){ripplet(arguments[0]),setCookie("token",daURL.value,{expires:year});var t=document.getElementById("notifications-area"),e=document.createElement("div");e.className="notification",e.innerHTML='<p title="Токен сохранен">Токен сохранен</p>',t.insertBefore(e,t.firstElementChild),notificationSound(),setTimeout(function(){e.classList.add("hidden"),setTimeout(function(){e.remove(),location.reload()},300)},800)},clearDAURLBtn.onclick=function(){ripplet(arguments[0]),setCookie("token",daURL.value="",{expires:year});var t=document.getElementById("notifications-area"),e=document.createElement("div");e.className="notification",e.innerHTML='<p title="Токен удален">Токен удален</p>',t.insertBefore(e,t.firstElementChild),notificationSound(),setTimeout(function(){e.classList.add("hidden"),setTimeout(function(){e.remove(),location.reload()},300)},800)},document.onkeydown=function(t){var e=document.getElementById("modal-overlay");e.classList.contains("closed")||"Escape"!==t.key||e.click()};var resetButton=document.getElementById("reset-icon");resetButton.onclick=function(){ripplet(arguments[0]);for(var t=document.getElementById("candidates-area");3<t.children.length;)t.removeChild(t.children[t.children.length-2]);clearRow()};for(var urlsBtns=document.getElementsByClassName("special-url"),i=0;i<urlsBtns.length;i++)urlsBtns[i].onclick=function(){ripplet(arguments[0])};function checksum(costElement){var calculated=costElement.value.replace(/[^\d+*/,.-]/g,"");calculated=calculated.replace(/,/,".");try{calculated=eval(calculated),isNaN(calculated)||!isFinite(calculated)?(costElement.value="",costElement.setAttribute("title","Сумма")):(calculated=0<calculated?+calculated.toFixed(2):"",costElement.value=calculated,costElement.setAttribute("title","Сумма: ".concat(calculated," ₽")))}catch(t){costElement.value="",costElement.setAttribute("title","Сумма")}}var costBuy=document.getElementsByClassName("cost-buy")[0],costBuyCookie=getCookie("buyCost"),costBuyClearBtn=document.querySelector(".block-buy .btn"),isBuy=!1,buyWinner,buyCost;function checkOnBuy(t){var e=+costBuy.value,n=+t.value,i=t.previousElementSibling.value.toTitle().truncate();if(e&&i&&e<=n)if(started)buyWinner=i,buyCost=n,isBuy=!0,resetBtn.click();else{var o=document.querySelector("#modal"),a=document.querySelector("#modal-overlay");a.onclick=function(){ripplet(arguments[0]),o.classList.toggle("closed"),a.classList.toggle("closed"),document.title="Аукцион β"},o.children[0].innerText='"'.concat(i,'" выкупили, аж за ').concat(n,"₽ Pog!"),document.title=30<i.length?"".concat(i.substring(0,30),'..." выкупили!'):"".concat(i," выкупили!"),o.classList.toggle("closed"),a.classList.toggle("closed"),notificationSound(),sendNotification("Аукцион окончен!",{body:'Выкупили "'.concat(30<i.length?"".concat(i.substring(0,30),"..."):i,'"!'),dir:"ltr",lang:"ru",icon:"/static/dist/img/favicon/favicon.png"})}}function sendNotification(e,n){if("Notification"in window)if("granted"===Notification.permission){new Notification(e,n).onclick=function(){window.focus()}}else"denied"!==Notification.permission&&Notification.requestPermission(function(t){"granted"===t?new Notification(e,n).onclick=focusWindow:console.log("Вы запретили показывать уведомления")});else console.log("Ваш браузер не поддерживает HTML Notifications, его необходимо обновить.")}costBuy.value=costBuyCookie||"",changeTitle(costBuy),costBuy.onchange=function(){changeTitle(this),checksum(this),setCookie("buyCost",this.value,{expires:year})},costBuy.onclick=function(){ripplet(arguments[0])},costBuyClearBtn.onclick=function(){ripplet(arguments[0]),setCookie("buyCost",costBuy.value="",{expires:-1})},"default"===Notification.permission&&Notification.requestPermission()}]);