var woodsauc=function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}([function(e,t,n){"use strict";n.d(t,"b",function(){return T}),n.d(t,"a",function(){return i});var T={className:"",color:"rgba(0,0,0,.1)",opacity:null,spreadingDuration:".4s",spreadingDelay:"0s",spreadingTimingFunction:"linear",clearingDuration:"1s",clearingDelay:"0s",clearingTimingFunction:"ease-in-out",centered:!1,appendTo:"body"};function i(e,n){var t=e.currentTarget,i=e.clientX,o=e.clientY;if(t instanceof Element){var r=n?Object.keys(T).reduce(function(e,t){return e[t]=n.hasOwnProperty(t)?n[t]:T[t],e},{}):T,a=t.getBoundingClientRect();if(r.centered&&"false"!==r.centered)i=a.left+.5*a.width,o=a.top+.5*a.height;else if("number"!=typeof i||"number"!=typeof o)return;var c=document.documentElement,s=document.body,l=document.createElement("div"),u=l,d="parent"===r.appendTo,m=getComputedStyle(t),f=l.style;if("fixed"===m.position||"absolute"===m.position&&d)d?t.parentElement.insertBefore(l,t):s.appendChild(l),w(f,m,["position","left","top","right","bottom","marginLeft","marginTop","marginRight","marginBottom"]);else if(d){var _=getComputedStyle(t.parentElement);if("flex"===_.display||"inline-flex"===_.display)t.parentElement.insertBefore(l,t),f.position="absolute",f.left=t.offsetLeft+"px",f.top=t.offsetTop+"px";else{var p=u=t.parentElement.insertBefore(document.createElement("div"),t),g=p.style;g.display="inline-block",g.position="relative",g.width=g.height="0",g.cssFloat=m.cssFloat;var h=p.getBoundingClientRect();p.appendChild(l),f.position="absolute",f.top=a.top-h.top+"px",f.left=a.left-h.left+"px"}}else s.appendChild(l),f.position="absolute",f.left=a.left+c.scrollLeft+s.scrollLeft+"px",f.top=a.top+c.scrollTop+s.scrollTop+"px";f.overflow="hidden",f.pointerEvents="none",f.width=a.width+"px",f.height=a.height+"px",f.zIndex=""+((parseInt(m.zIndex,10)||0)+1),f.opacity=r.opacity,w(f,m,["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","webkitClipPath","clipPath"]);var b=Math.max(i-a.left,a.right-i),v=Math.max(o-a.top,a.bottom-o),y=Math.sqrt(b*b+v*v),E=l.appendChild(document.createElement("div")),k=E.style;return E.className=r.className,k.backgroundColor=r.color,k.width=k.height=2*y+"px",k.marginLeft=i-a.left-y+"px",k.marginTop=o-a.top-y+"px",k.borderRadius="50%",k.transition="transform "+r.spreadingDuration+" "+r.spreadingTimingFunction+" "+r.spreadingDelay+",opacity "+r.clearingDuration+" "+r.clearingTimingFunction+" "+r.clearingDelay,k.transform="scale(0)",E.offsetTop,E.addEventListener("transitionend",function(e){"opacity"===e.propertyName&&u.parentElement&&u.parentElement.removeChild(u)}),k.transform="",k.opacity="0",l}}function w(e,t,n){for(var i=0,o=n;i<o.length;i++){var r=o[i];e[r]=t[r]}}},function(e,t,n){"use strict";var s=n(0),l=n(2),u=document.getElementById("notifications-area");"default"===Notification.permission&&Notification.requestPermission();function d(){var e=new Audio;e.src="/static/sound/light.mp3",e.autoplay=!0}function i(){return window.focus()}function o(e,t){var n=new Notification(e,t);return n.onclick=i,n}var r={playNotificationSound:d,sendNotification:function(t,e){var n=Notification.permission,i=function(e,t){return{title:e,body:t,dir:"ltr",lang:"ru",icon:"/static/img/favicon/favicon.png"}}(t,e);"Notification"in window&&("granted"===n?o(t,i):"denied"!==n&&Notification.requestPermission(function(e){"granted"===e&&o(t,i)}))},sendInside:function(e){var t=document.createElement("div"),n=document.createElement("p");n.innerText=e,t.appendChild(n),t.className="notification",u.insertBefore(t,u.firstElementChild),r.playNotificationSound(),setTimeout(function(){t.classList.add("hidden"),setTimeout(function(){t.remove()},300)},1200)},sendPrompt:function(e,t){var n=document.createElement("div"),i=document.createElement("p"),o=document.createElement("button"),r=document.createElement("button"),a=document.createElement("img"),c=document.createElement("img");n.className="notification",e=Object(l.a)(e),i.innerText=e,i.setAttribute("title",e),a.setAttribute("src","/static/img/icons/material/done.svg"),c.setAttribute("src","/static/img/icons/material/clear.svg"),a.setAttribute("alt","Подтвердить"),c.setAttribute("alt","Отклонить"),[o,r].forEach(function(e){e.className="notification-btn",e.setAttribute("type","button")}),o.setAttribute("title","Подтвердить"),r.setAttribute("title","Отклонить"),o.addEventListener("click",s.a),r.addEventListener("click",s.a),r.onclick=function(){n.classList.add("hidden"),setTimeout(function(){return n.remove()},300)},o.onclick=function(){t(),r.click()},o.appendChild(a),r.appendChild(c),n.appendChild(i),n.appendChild(o),n.appendChild(r),u.insertBefore(n,u.firstChild),d()},clear:function(){for(;0<u.children.length;)u.removeChild(u.firstChild)}};t.a=r},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o});var i=function(e){return e.replace(/(^|\s)\S/g,function(e){return e.toUpperCase()})},o=function(e){return e.replace(/\s+/g," ")},r=function(e){return e.replace(/\s+$|^\s+/g,"")}},function(e,t,n){"use strict";var i=n(0),o=document.getElementById("settings-icon"),r=document.getElementById("settings"),a=Array.from(document.getElementsByClassName("special-url"));o.addEventListener("click",i.a),o.onclick=function(){return r.classList.toggle("closed")},a.forEach(function(e){return e.addEventListener("click",i.a)});function c(e,t,n){var i=2<arguments.length&&void 0!==n?n:{expires:31622400},o=i.expires;if("number"==typeof o&&o){var r=new Date;r.setTime(r.getTime()+1e3*o),o=i.expires=r}o&&o.toUTCString&&(i.expires=o.toUTCString()),t=encodeURIComponent(t);var a="".concat(e,"=").concat(t);for(var c in i){var s=i[c];a+="; ".concat(c),!0!==s&&(a+="=".concat(s))}document.cookie=a}var s={cookie:{year:31622400,set:c,delete:function(e){c(e,"",{expires:-1})}},tools:{selectTxt:function(e){e.focus(),e.select()},isUrlValid:function(e){return e=encodeURI(e),/\.(jpg|jpeg|png|gif|webp|svg)$/.test(e)&&/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/.test(e)}}};t.a=s},function(e,t,n){"use strict";var i=n(0),o=n(1),r=n(2),a=document.getElementById("modal"),c=document.getElementById("modal-overlay"),s=document.getElementById("timer");c.addEventListener("click",i.a),document.onkeydown=function(e){c.classList.contains("closed")||"Escape"!==e.key||c.click()};function l(){var e=document.getElementsByClassName("name"),t=Array.from(document.getElementsByClassName("cost")).map(function(e){return Number(e.value)}),n=Math.max.apply(null,t);if(n){var i=e[t.indexOf(n)].value;return i||null}}var u=function(e){return d(m(e))},d=function(e){var t=e?"победил":null===e?"победила":"победил";return"".concat(f(e)," ").concat(t,"!")},m=function(e){return e?(e=(e=Object(r.b)(Object(r.c)(e))).length<20?e:"".concat(e.substr(0,20),"..."),JSON.stringify(e)):e},f=function(e){return e||(null===e?"Пустая позиция":"Никто не")},_={show:function(e){e=e||u(l()),window.isBuy?(e=window.buyWinner,a.querySelector("p").innerText="".concat(e," выкупили, аж за ").concat(window.buyCost,"₽ Pog!"),document.title="".concat(e," выкупили!"),o.a.sendNotification("Аукцион окончен!","Выкупили ".concat(e))):(a.querySelector("p").innerText=e,o.a.sendNotification("Аукцион окончен!",e),document.title=e),s.classList.remove("danger"),o.a.playNotificationSound(),c.classList.toggle("closed"),a.classList.toggle("closed"),c.onclick=function(){a.classList.toggle("closed"),c.classList.toggle("closed"),document.title="WoodsAuc"}},return:l,compile:u,addEnding:d,decorate:m,humanize:f};t.a=_},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",function(){return sortCandidates}),__webpack_require__.d(__webpack_exports__,"a",function(){return changeTitle}),__webpack_require__.d(__webpack_exports__,"b",function(){return checkOnBuy}),__webpack_require__.d(__webpack_exports__,"c",function(){return createBlock});var ripplet_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_notifications__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_winner__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_stringUtilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),firstBlock=document.querySelector(".block"),firstName=firstBlock.querySelector(".name"),firstCost=firstBlock.querySelector(".cost"),firstKpLink=firstBlock.querySelector(".kp-link"),firstClearRowBtn=firstBlock.querySelector(".btn"),buyBlock=document.querySelector(".block-buy"),buyText=document.querySelector(".block-buy span"),buyInput=buyBlock.querySelector(".cost-buy"),buyClear=buyBlock.querySelector(".btn"),buyCookie=getCookie("buyCost"),modalOverlay=document.getElementById("modal-overlay"),modal=document.getElementById("modal"),stopBtn=document.getElementById("stop-btn"),addBtn=document.getElementById("add-btn"),resetButton=document.getElementById("reset-icon"),area=document.getElementById("candidates-area"),defaultSize=16.2,defaultMargin=2.6,highestMargin=35.25,maxSize=defaultSize,maxMargin=defaultMargin;function sortCandidates(){var e=Array.from(document.getElementsByClassName("name")),s=Array.from(document.getElementsByClassName("cost")),l=[];e.forEach(function(e,t){var n=s[t],i=e.value,o=Number(n.value),r=e.getAttribute("title"),a=n.getAttribute("title"),c=e.parentElement.parentElement.querySelector(".kp-link").href;l.push({nameVal:i,costVal:o,nameTitle:r,costTitle:a,link:c})}),l=l.sort(function(e,t){return e.costVal-t.costVal}).reverse(),e.forEach(function(e,t){var n=l[t],i=n.costVal;i=i?Number(i):"",e.value=n.nameVal,s[t].value=i,e.setAttribute("title",n.nameTitle),s[t].setAttribute("title",n.costTitle),e.parentElement.parentElement.querySelector(".kp-link").href=n.link})}function clearFirstRow(){firstName.value="",firstCost.value="",firstName.setAttribute("title","Фильм, игра, etc"),firstCost.setAttribute("title","Сумма"),firstKpLink.href="https://www.kinopoisk.ru",changeSize(firstName),sortCandidates()}function removeRow(e){var t=document.getElementsByClassName("name");e.parentElement.parentElement.remove(),1!==t.length||t[0].value||(maxSize=defaultSize,t[0].removeAttribute("style"),addBtn.removeAttribute("style"),buyText.removeAttribute("style"))}function changeTitle(e){var t=e.value?": ".concat(e.value," ₽"):"";e.setAttribute("title","Сумма".concat(t))}function checksum(costEl){var calc=costEl.value.replace(/[^\d+*/,.-]/g,"").replace(/,/,".");try{calc=eval(calc),isNaN(calc)||!isFinite(calc)?costEl.value="":(calc=calc<=0?"":Number(Number(calc).toFixed(2)),costEl.value=calc)}catch(e){costEl.value=""}}function checkOnBuy(e){var t=Number(buyInput.value),n=Number(e.value),i=_winner__WEBPACK_IMPORTED_MODULE_3__.a.decorate(Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__.b)(e.previousElementSibling.value));!t||!i||n<t||(window.started?(window.isBuy=!0,window.buyWinner=i,window.buyCost=n,stopBtn.click()):(modalOverlay.onclick=function(){modal.classList.add("closed"),modalOverlay.classList.add("closed"),document.title="WoodsAuc"},modal.querySelector("p").innerText="".concat(i," выкупили, аж за ").concat(n,"₽ Pog!"),modalOverlay.classList.remove("closed"),modal.classList.remove("closed"),_notifications__WEBPACK_IMPORTED_MODULE_1__.a.playNotificationSound(),_notifications__WEBPACK_IMPORTED_MODULE_1__.a.sendNotification("Аукцион окончен!","Выкупили ".concat(i,"!")),document.title="".concat(i," выкупили!")))}function changeSize(e){var t,n,i=Array.from(document.getElementsByClassName("name")),o=e.value.length-10;0<o?(t=Number((defaultSize+2.1*o).toFixed(2)),n=Number((defaultMargin+2.1*o).toFixed(2)),n=highestMargin<n?highestMargin:n):1===i.length&&(maxSize=defaultSize,maxMargin=defaultMargin,i[0].removeAttribute("style"),addBtn.removeAttribute("style"),buyText.removeAttribute("style")),t&&maxSize<t&&(maxSize=t,maxMargin=n,i.forEach(function(e){return e.style.width="".concat(t,"vw")}),addBtn.style.width="".concat(t+10,"vw"),buyText.style.marginRight="".concat(n,"vw"))}function createLink(e){var t=e.value;t?(e.parentElement.parentElement.querySelector(".kp-link").href=encodeURI("https://www.kinopoisk.ru/s/type/all/find/".concat(t,"/")),e.setAttribute("title",Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__.b)(t))):(e.parentElement.parentElement.querySelector(".kp-link").href="https://www.kinopoisk.ru",e.setAttribute("title","Фильм, игра, etc"))}function trimValue(e){e.value=Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__.c)(e.value)}function oneSpacedValue(e){e.value=Object(_stringUtilities__WEBPACK_IMPORTED_MODULE_4__.a)(e.value)}function createBlock(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=firstBlock.cloneNode(!0),i=n.querySelector(".name"),o=n.querySelector(".cost"),r=n.querySelector(".kp-link"),a=n.querySelector(".btn"),c=a.querySelector("img"),s=e&&t;i.value=e,o.value=t,i.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),o.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),r.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),a.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),a.onclick=function(){removeRow(this)},i.onkeyup=function(){createLink(this),changeSize(this)},i.onchange=function(){changeSize(this)},o.onchange=function(){checksum(this),checkOnBuy(this),changeTitle(this),sortCandidates()},c.setAttribute("src","/static/img/icons/material/delete.svg"),r.setAttribute("title","Кинопоиск"),s?(checkOnBuy(o),createLink(i),changeTitle(o)):(i.setAttribute("title","Фильм, игра, etc"),o.setAttribute("title","Сумма"),r.setAttribute("href","https://www.kinopoisk.ru")),area.insertBefore(n,area.lastElementChild),n.classList.add("visible"),s?(changeSize(i),sortCandidates()):i.focus()}firstName.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),firstCost.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),firstKpLink.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),firstClearRowBtn.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),buyInput.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),buyClear.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),resetButton.addEventListener("click",ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a),firstName.onchange=function(){changeSize(this),trimValue(this)},firstName.onkeyup=function(){createLink(this),changeSize(this),oneSpacedValue(this)},firstCost.onchange=function(){checksum(this),checkOnBuy(this),changeTitle(this),sortCandidates()},firstClearRowBtn.onclick=clearFirstRow,addBtn.onclick=function(){createBlock(),Object(ripplet_js__WEBPACK_IMPORTED_MODULE_0__.a)(arguments[0])},resetButton.onclick=function(){for(;3<area.children.length;)area.children[area.children.length-2].remove();clearFirstRow()},buyInput.value=buyCookie||"",changeTitle(buyInput),buyClear.onclick=function(){buyInput.value="",buyInput.setAttribute("title","Сумма выкупа"),_settings__WEBPACK_IMPORTED_MODULE_2__.a.cookie.delete("buyCost")},buyInput.onchange=function(){checksum(this),changeTitle(this),this.value?_settings__WEBPACK_IMPORTED_MODULE_2__.a.cookie.set("buyCost",this.value):_settings__WEBPACK_IMPORTED_MODULE_2__.a.cookie.delete("buyCost")}},function(e,t,n){"use strict";n.r(t);var i,o=n(0),l=n(1),r=n(3),a=navigator.userAgent.toLowerCase().includes("ff"),c=document.querySelector("body"),s=getCookie("bg-url"),u=document.getElementById("bg-url"),d=document.getElementById("save-bg-url-btn"),m=document.getElementById("clear-bg-url-btn"),f=document.getElementById("color-extractor"),_=getCookie("accent"),p=document.createElement("style");if(u.value=s||"",b(s),i=_?y(_,60).str:"rgba(243, 151, 39, .6)",o.b.color=i,o.b.clearingDuration=".3s",o.b.spreadingDuration=".3s",_){var g=y(v(_),70).str;p.innerText="",p.innerText+="#bg-url {color: ".concat(_,"}"),p.innerText+="#da-url {color: ".concat(_,"}"),p.innerText+=".danger {color: ".concat(_," !important}"),p.innerText+=".name {color: ".concat(_,"}"),p.innerText+=".cost {color: ".concat(_,"}"),p.innerText+=".cost-buy {color: ".concat(_,"}"),p.innerText+="input:focus {--accent: ".concat(_," !important; --shadow: ").concat(g,"}"),p.innerText+="::selection {background: ".concat(g,"}"),p.innerText+="::-moz-selection {background: ".concat(g,"}"),document.head.appendChild(p)}else{var h=document.createElement("style");h.innerText="",h.innerText+="#bg-url {color: #f39727}",h.innerText+="#da-url {color: #f39727}",h.innerText+=".danger {color: #f39727} !important",h.innerText+=".name {color: #f39727}",h.innerText+=".cost {color: #f39727}",h.innerText+=".cost-buy {color: #f39727}",h.innerText+="input:focus {--accent: #f39727; --shadow: rgba(243, 151, 39, .7)}",h.innerText+="::selection {background: rgba(243, 151, 39, .7)}",h.innerText+="::-moz-selection {background: rgba(243, 151, 39, .7)}"}function b(e){var t=new Image;if(e)return t.src=e,void(t.onload=function(){return c.style.backgroundImage="url('".concat(t.src,"')")});c.style.backgroundImage="url('/static/img/bg/tree.".concat(a?"jpg":"webp","')")}function v(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16),i=parseInt(t[2],16),o=parseInt(t[3],16);return t?{rgb:{r:n,g:i,b:o},str:"rgb(".concat(n,", ").concat(i,", ").concat(o)}:null}function y(e,t){var n,i,o,r=t<=1?t:t/100;return o="string"==typeof e?(n=(e=v(e).rgb).r,i=e.g,e.b):(n=e.rgb.r,i=e.rgb.g,e.rgb.b),e?{rgba:{r:n,g:i,b:o,a:r},str:"rgba(".concat(n,", ").concat(i,", ").concat(o,", ").concat(r,")")}:null}u.addEventListener("click",o.a),m.addEventListener("click",o.a),d.addEventListener("click",o.a),u.onclick=function(){r.a.tools.selectTxt(this)},m.onclick=function(){u.value||getCookie("bg-url")?(b(""),u.value="",o.b.color="rgba(243, 151, 39, .6)",p.innerText="",p.innerText+="#bg-url {color: #f39727}",p.innerText+="#da-url {color: #f39727}",p.innerText+=".danger {color: #f39727 !important}",p.innerText+=".name {color: #f39727}",p.innerText+=".cost {color: #f39727}",p.innerText+=".cost-buy {color: #f39727}",p.innerText+="input:focus {--accent: #f39727; --shadow: rgba(243, 151, 39, .7)}",p.innerText+="::selection {background: rgba(243, 151, 39, .7)}",p.innerText+="::-moz-selection {background: rgba(243, 151, 39, .7)}",document.head.appendChild(p),r.a.cookie.delete("bg-url"),r.a.cookie.delete("accent"),l.a.sendInside("Фон сброшен")):l.a.sendInside("Фон уже сброшен")},d.onclick=function(){var n=encodeURI(u.value);if(n)if(n!==getCookie("bg-url")){if(!r.a.tools.isUrlValid(n))return l.a.sendInside("Введите корректный URL"),void(u.value="");b(n),l.a.sendInside("Фон обновлен"),f.setAttribute("src","https://cors-anywhere.herokuapp.com/".concat(n)),f.addEventListener("load",function(){var e=new Vibrant(this).swatches().Vibrant.getHex(),t=y(v(e),60).str;o.b.color=t,p.innerText="",p.innerText+="#bg-url {color: ".concat(e,"}"),p.innerText+="#da-url {color: ".concat(e,"}"),p.innerText+=".danger {color: ".concat(e," !important}"),p.innerText+=".name {color: ".concat(e,"}"),p.innerText+=".cost {color: ".concat(e,"}"),p.innerText+=".cost-buy {color: ".concat(e,"}"),p.innerText+="input:focus {--accent: ".concat(e,"; --shadow: ").concat(t,"}"),p.innerText+="::selection {background: ".concat(e,"}"),p.innerText+="::-moz-selection {background: ".concat(e,"}"),document.head.appendChild(p),r.a.cookie.set("bg-url",n),r.a.cookie.set("accent",e)})}else l.a.sendInside("Этот фон уже установлен");else l.a.sendInside("Нет URL фона")};var E=n(5),k=document.getElementById("da-url"),T=document.getElementById("save-da-url-btn"),w=document.getElementById("clear-da-url-btn"),C=getCookie("token");k.value=C||"",[k,T,w].forEach(function(e){return e.addEventListener("click",o.a)}),k.onclick=function(){r.a.tools.selectTxt(this)},T.onclick=function(){var e=k.value;if(e)return 20!==e.length?(l.a.sendInside("Введите корректный токен"),void(k.value="")):void(e!==getCookie("token")?(r.a.cookie.set("token",e),l.a.sendInside("Токен сохранен"),location.reload()):l.a.sendInside("Этот токен уже установлен"));l.a.sendInside("Введите токен")},w.onclick=function(){k.value?(k.value="",r.a.cookie.delete("token"),l.a.sendInside("Токен удален"),location.reload()):l.a.sendInside("Токен уже удален")};var B=n(4),x=n(2),O={reconnection:!0};try{!function(){var e,t=getCookie("token");if(!t)return;(e=io("https://socket.donationalerts.ru:443",O)).emit("add-user",{token:t,type:"minor"}),e.on("donation",function(e){return L(e)})}()}catch(e){console.log("Нет подключения, к DonationAlerts.")}var L=function(e){var r,a,t,o,c,s=!1;if(window.started&&1==(t=JSON.parse(e)).alert_type&&(a=Object(x.a)(t.message),r=Number(t.amount),o=Array.from(document.getElementsByClassName("name")),Array.from(document.getElementsByClassName("cost")).some(function(e,t){var n=o[t].value,i=n&&Object(x.c)(a).toLowerCase().includes(Object(x.c)(n).toLowerCase());return c="Добавить ₽".concat(r,' к "').concat(Object(x.b)(n),'"?'),!!i&&(l.a.sendPrompt(c,function(){var o=Array.from(document.getElementsByClassName("name"));Array.from(document.getElementsByClassName("cost")).some(function(e,t){var n=o[t].value,i=Number(e.value);return!(!n||!a.toLowerCase().includes(n.toLowerCase()))&&(e.value=r+i,Object(E.b)(e),Object(E.a)(e),Object(E.d)(),!0)})}),s=!0)}),l.a.sendNotification("Новое пожертвование".concat(t.username?" от ".concat(t.username):"","!"),"".concat(B.a.decorate(Object(x.a)(a))," с ").concat(r,"₽")),!s)){c='Создать "'.concat(Object(x.c)(Object(x.b)(a)),'" с ₽').concat(r,"?");l.a.sendPrompt(c,function(){Object(E.c)(a,r)})}};function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var I=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=e.innerHTML.split(":");this.elem=e,this.m=+t[0],this.s=+t[1],this.ms=+t[2],this.time=new Date(6e4*this.m+1e3*this.s+this.ms),this.started=!1,this.timeStart=new Date}return function(e,t,n){t&&M(e.prototype,t),n&&M(e,n)}(n,[{key:"start",value:function(){var e=this;this.started||(this.m?(this.timeStart=new Date,this.m--,this.started=!0,window.started=!0,requestAnimationFrame(function(){return e.updateTimer()})):B.a.show())}},{key:"reset",value:function(){this.elem.innerHTML="00:00:00",this.m=0,this.time=new Date(0)}},{key:"stop",value:function(){this.reset(),this.started=!1,window.started=!1,cancelAnimationFrame(this.updateTimer)}},{key:"minusOne",value:function(){this.m&&(this.m--,this.started?this.timeStart.setMinutes(this.timeStart.getMinutes()-1):(this.m=this.m<0?0:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),this.elem.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00")))}},{key:"plusOne",value:function(){this.started?59!==this.m&&(this.timeStart.setMinutes(this.timeStart.getMinutes()+1),this.m++):(this.m++,this.m=59<this.m?59:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),this.elem.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00"))}},{key:"plusTwo",value:function(){this.started?58===this.m?(this.timeStart.setMinutes(this.timeStart.getMinutes()+1),this.m++):this.m<58&&(this.timeStart.setMinutes(this.timeStart.getMinutes()+2),this.m+=2):(this.m+=2,this.m=59<this.m?59:this.m,this.time=new Date(6e4*this.m+1e3*this.s+this.ms),this.elem.innerHTML="".concat(this.m<10?"0".concat(this.m):this.m,":00:00"))}},{key:"updateTimer",value:function(){var e,t=this,n=new Date,i=new Date(n-this.timeStart),o=new Date(this.time-i),r=document.title,a=o.getMinutes(),c=o.getSeconds(),s=o.getMilliseconds(),l=B.a.return();this.m=a,this.s=c,this.ms=s,!a&&c<31&&!this.elem.classList.contains("danger")?this.elem.classList.add("danger"):this.elem.classList.contains("danger")&&(a||31<c)&&this.elem.classList.remove("danger"),l?r===(e="".concat(B.a.decorate(l)," лидирует!"))&&"WoodsAuc"!==r||(document.title=e):"WoodsAuc"!==r&&(document.title="WoodsAuc"),!a&&!c&&s<300||this.time<i?(this.stop(),B.a.show(B.a.compile(l))):(a=a<10?"0".concat(a):a,c=c<10?"0".concat(c):c,s=s<10?"0".concat(s):s,s=String(s).substr(0,2),this.elem.innerHTML="".concat(a,":").concat(c,":").concat(s),requestAnimationFrame(function(){return t.updateTimer()}))}}]),n}(),A=getCookie("previousMinutes"),D=document.getElementById("timer");A&&(D.innerHTML="".concat(A,":00:00"));var S=new I(D),P=Array.from(document.getElementById("timer-btns").children),N=P[0],R=P[1],j=P[2],U=P[3],q=P[4];P.forEach(function(e){return e.addEventListener("click",o.a)}),N.onclick=function(){var e=D.innerHTML.split(":")[0];e&&r.a.cookie.set("previousMinutes",e),S.start()},R.onclick=function(){S.started?(S.timeStart=new Date(new Date-S.time+300),l.a.clear(),S.stop()):S.reset()},j.onclick=function(){return S.minusOne()},U.onclick=function(){return S.plusOne()},q.onclick=function(){return S.plusTwo()}}]);